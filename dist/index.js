(()=>{"use strict";var e={290:function(e,t,r){var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.JSBT=void 0;const n=r(1434),a=r(4917),d=r(5420),i=r(5902),y=r(2907),s=o(r(9896));t.JSBT=class{static encode(e){const t=(0,y.createEncodeOptions)();return t.refs={enabled:!0},(0,i.encode)(e,t)}static decode(e){const t=new s.default(e);t.completeStream();const r=(0,d.createDecodeOptions)();return r.context.readBytes=t.getReadBytes(),(0,n.decode)(null,t,r)}static async decodeStream(e){const t=(0,d.createDecodeOptions)();return t.context.readBytes=e.getReadBytes(),(0,a.decodeStream)(null,e,t)}}},242:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.MAX_DATE_INTEGER=t.MAX_7_BYTES_INTEGER=void 0,t.MAX_7_BYTES_INTEGER=9007199254740991,t.MAX_DATE_INTEGER=864e13},68:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.bigIntToBytes=void 0,t.bigIntToBytes=(e,t=0,r=!1)=>{if(e<0&&!t)throw new Error(`byteSize param should be provided for negative bigInt ${e}`);const o=[];let n=e<0?-(e+1n):e;for(let e=1;t?e<=t:n;e+=1)o.push(0xffn&n),n>>=8n;if(e<0)for(let e=0;e<o.length;e+=1)o[e]=255n-o[e];return r?o.reverse():o}},3674:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.bytesToBigInt=void 0,t.bytesToBigInt=e=>{const t=Array.isArray(e)?e.length:e.byteLength;if(0===t)return 0n;let r=0n;for(let o=0;o<t;o+=1)r=BigInt(e[o])<<BigInt(8*o)|r;return r}},2337:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.bytesToInteger=void 0;const o=r(3674);t.bytesToInteger=e=>Number((0,o.bytesToBigInt)(e))},9835:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.bytesToUtf16=void 0,t.bytesToUtf16=e=>{const t=[],r=Array.isArray(e)?e.length:e.byteLength;for(let o=0;o<r;o+=1){const r=e[o],n=e[o+1];n>=216&&n<=219||n>=220&&n<=223?(t.push(String.fromCharCode(n<<8|r)),o+=1):t.push(String.fromCharCode(r))}return t.join("")}},6725:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.doubleToBytes=void 0,t.doubleToBytes=(e,t=!1)=>{const r=new ArrayBuffer(8);new Float64Array(r)[0]=e;const o=Array.from(new Uint8Array(r));return t?o.reverse():o}},7106:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getBytesSizeForString=void 0,t.getBytesSizeForString=e=>{let t=e.length;for(let r=e.length-1;r>=0;r-=1){const o=e.charCodeAt(r);o>127&&o<=2047?t+=1:o>2047&&o<=65535&&(t+=2),o>=56320&&o<=57343&&(r-=1)}return t}},4894:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.integerToBytes=void 0;const o=r(68);t.integerToBytes=(e,t=0,r=!1)=>{if(e>4294967295||e<=-4294967295)return(0,o.bigIntToBytes)(BigInt(e),e<0&&!t?8:t,r).map((e=>Number(e)));const n=[];let a=e;for(let e=1;t?e<=t:a;e+=1)n.push(255&a),a>>>=8;return r?n.reverse():n}},1434:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.decode=void 0;const o=r(7457),n=r(3920),a=r(3183),d=r(6990),i=r(8097),y=r(7011),s=r(6685),c=r(6774),l=r(1028),f=r(5147),p=r(8514),u=r(4184),g=r(7185),B=r(2658);t.decode=(e,t,r)=>{const{refs:h,refByteSlice:_}=r.context;null===e&&(e=t.readByte());const E=240&e,b=!(E===o.ETypeByteCode.Refs),C=h.length;let m,T=!0;b&&(h.push(void 0),_.push({index:t.getReadBytesIndex()-1,length:0}));let A=!1;switch(E){case o.ETypeByteCode.Refs:m=(0,f.decodeRef)(e,t,r),A=!0,T=!1;break;case o.ETypeByteCode.Constant:m=(0,d.decodeConstant)(e,t),A=!0,T=!1;break;case o.ETypeByteCode.String:m=(0,u.decodeString)(e,t),A=!0,T=m.length>2;break;case o.ETypeByteCode.Integer:m=(0,s.decodeInteger)(e,t),A=!0,T=m>255||m<-255;break;case o.ETypeByteCode.Float:m=(0,y.decodeFloat)(e,t),A=!0,T=!0;break;case o.ETypeByteCode.BigInt:m=(0,a.decodeBigInt)(e,t),A=!0,T=!0;break;case o.ETypeByteCode.Array:m=(0,n.decodeArray)(e,t,r,h[C]=[]),A=!0,T=!0;break;case o.ETypeByteCode.Typed_Array:m=(0,B.decodeTypedArray)(e,t,r),A=!0;break;case o.ETypeByteCode.Object:m=(0,l.decodeObject)(e,t,r,h[C]={}),A=!0,T=!0;break;case o.ETypeByteCode.Set:m=(0,p.decodeSet)(e,t,r,h[C]=new Set),A=!0,T=!0;break;case o.ETypeByteCode.Map:m=(0,c.decodeMap)(e,t,r,h[C]=new Map),A=!0,T=!0;break;case o.ETypeByteCode.Symbol:m=(0,g.decodeSymbol)(e,t),A=!0,T=!0;break;case o.ETypeByteCode.Date:m=(0,i.decodeDate)(e,t),A=!0,T=Math.abs(m.getTime())>255}if(!1===A)throw new Error(`Unsupported decoding value: "${e}"`);return b&&(T?(h[C]=m,_[C].length=t.getReadBytesIndex()-_[C].index):(h.pop(),_.pop())),m}},3920:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.decodeArray=void 0;const o=r(2337),n=r(9475),a=r(7457),d=r(1434),i=r(6685);t.decodeArray=(e,t,r,y=[])=>{if((240&e)!==a.ETypeByteCode.Array)throw new Error(`Provaded incorrect type ${e} for decoding array`);const s=8&e,c=7&e;if(0===c)return y;const l=(0,o.bytesToInteger)(t.readBytes(c)),f=s?(0,o.bytesToInteger)(t.readBytes(c)):l,p=y;if(p.length=l,s)for(let e=0;e<f;e+=1){const e=(0,i.decodeInteger)(t.readByte(),t),o=(0,d.decode)(t.readByte(),t,r);p[e]=o}else for(let e=0;e<l;e+=1){const o=t.readByte();if(o===n.EConstantByteCode.Empty_Value)continue;const a=(0,d.decode)(o,t,r);p[e]=a}return p}},4861:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.decodeArrayStream=void 0;const o=r(2337),n=r(9475),a=r(7457),d=r(6635),i=r(4917);t.decodeArrayStream=async(e,t,r,y=[])=>{if((240&e)!==a.ETypeByteCode.Array)throw new Error(`Provaded incorrect type ${e} for decoding array`);const s=8&e,c=7&e;if(0===c)return y;const l=(0,o.bytesToInteger)(await t.readStreamBytes(c)),f=s?(0,o.bytesToInteger)(await t.readStreamBytes(c)):l,p=y;if(p.length=l,s)for(let e=0;e<f;e+=1){const e=await(0,d.decodeIntegerStream)(await t.readStreamByte(),t),o=await(0,i.decodeStream)(await t.readStreamByte(),t,r);p[e]=o}else for(let e=0;e<l;e+=1){const o=await t.readStreamByte();if(o===n.EConstantByteCode.Empty_Value)continue;const a=await(0,i.decodeStream)(o,t,r);p[e]=a}return p}},3183:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.decodeBigInt=void 0;const o=r(3674),n=r(2337),a=r(7457);t.decodeBigInt=(e,t)=>{if((240&e)!==a.ETypeByteCode.BigInt)throw new Error(`Provaded incorrect type ${e} for decoding bigint`);const r=7&e,d=Boolean(8&e);if(0===r)return d?-0n:0n;const i=t.readBytes(r),y=(0,n.bytesToInteger)(i),s=t.readBytes(y),c=(0,o.bytesToBigInt)(s);return d?-c:c}},9898:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.decodeBigIntStream=void 0;const o=r(3674),n=r(2337),a=r(7457);t.decodeBigIntStream=async(e,t)=>{if((240&e)!==a.ETypeByteCode.BigInt)throw new Error(`Provaded incorrect type ${e} for decoding bigint`);const r=7&e,d=Boolean(8&e);if(0===r)return d?-0n:0n;const i=await t.readStreamBytes(r),y=(0,n.bytesToInteger)(i),s=await t.readStreamBytes(y),c=(0,o.bytesToBigInt)(s);return d?-c:c}},6990:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.decodeConstant=t.constantMap=void 0;const o=r(9475),n=r(7457);t.constantMap=new Map([[o.EConstantByteCode.FALSE,!1],[o.EConstantByteCode.TRUE,!0],[o.EConstantByteCode.Null,null],[o.EConstantByteCode.Undefined,void 0],[o.EConstantByteCode.NaN,NaN],[o.EConstantByteCode.Pos_Infinity,1/0],[o.EConstantByteCode.Neg_Infinity,-1/0],[o.EConstantByteCode.Empty_Value,""]]),t.decodeConstant=(e,r)=>{if((240&e)!==n.ETypeByteCode.Constant)throw new Error(`Provaded incorrect type ${e} for decoding contant`);if(!t.constantMap.has(e))throw new Error("Not supported contsant for decoding");return t.constantMap.get(e)}},3558:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.decodeConstantStream=void 0;const o=r(7457),n=r(6990);t.decodeConstantStream=async(e,t)=>{if((240&e)!==o.ETypeByteCode.Constant)throw new Error(`Provaded incorrect type ${e} for decoding contant`);if(!n.constantMap.has(e))throw new Error("Not supported contsant for decoding");return n.constantMap.get(e)}},8097:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.decodeDate=void 0;const o=r(2337),n=r(7457);t.decodeDate=(e,t)=>{if((240&e)!==n.ETypeByteCode.Date)throw new Error(`Provaded incorrect type ${e} for decoding Date`);const r=7&e,a=Boolean(8&e);if(0===r)return new Date(0);const d=t.readBytes(r),i=(0,o.bytesToInteger)(d);return new Date(a?-i:i)}},4834:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.decodeDateStream=void 0;const o=r(2337),n=r(7457);t.decodeDateStream=async(e,t)=>{if((240&e)!==n.ETypeByteCode.Date)throw new Error(`Provaded incorrect type ${e} for decoding Date`);const r=7&e,a=Boolean(8&e);if(0===r)return new Date(0);const d=await t.readStreamBytes(r),i=(0,o.bytesToInteger)(d);return new Date(a?-i:i)}},7011:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.decodeFloat=void 0;const o=r(7457);t.decodeFloat=(e,t)=>{if((240&e)!==o.ETypeByteCode.Float)throw new Error(`Provaded incorrect type ${e} for decoding float`);const r=1+(7&e);let n=0;if(8&e)n=t.readByte();else for(let e=0;e<r;e+=1)n|=1<<e;const a=t.readBytes(r),d=new Uint8Array(8);let i=0;for(let e=0;e<8;e+=1)n&128>>>e&&(d[e]=a[i],i+=1);return new Float64Array(d.buffer)[0]}},5708:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.decodeFloatStream=void 0;const o=r(7457);t.decodeFloatStream=async(e,t)=>{if((240&e)!==o.ETypeByteCode.Float)throw new Error(`Provaded incorrect type ${e} for decoding float`);const r=1+(7&e);let n=0;if(8&e)n=await t.readStreamByte();else for(let e=0;e<r;e+=1)n|=1<<e;const a=await t.readStreamBytes(r),d=new Uint8Array(8);let i=0;for(let e=0;e<8;e+=1)n&128>>>e&&(d[e]=a[i],i+=1);return new Float64Array(d.buffer)[0]}},6685:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.decodeInteger=void 0;const o=r(2337),n=r(7457);t.decodeInteger=(e,t)=>{if((240&e)!==n.ETypeByteCode.Integer)throw new Error(`Provaded incorrect type ${e} for decoding integer`);const r=7&e,a=Boolean(8&e);if(0===r)return a?-0:0;const d=t.readBytes(r),i=(0,o.bytesToInteger)(d);return a?-i:i}},6635:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.decodeIntegerStream=void 0;const o=r(2337),n=r(7457);t.decodeIntegerStream=async(e,t)=>{if((240&e)!==n.ETypeByteCode.Integer)throw new Error(`Provaded incorrect type ${e} for decoding integer`);const r=7&e,a=Boolean(8&e);if(0===r)return a?-0:0;const d=await t.readStreamBytes(r),i=(0,o.bytesToInteger)(d);return a?-i:i}},6774:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.decodeMap=void 0;const o=r(2337),n=r(7457),a=r(1434);t.decodeMap=(e,t,r,d=new Map)=>{if((240&e)!==n.ETypeByteCode.Map)throw new Error(`Provaded incorrect type ${e} for decoding map`);const i=7&e;if(0===i)return d;const y=(0,o.bytesToInteger)(t.readBytes(i)),s=d;for(let e=0;e<y;e+=1){const e=(0,a.decode)(t.readByte(),t,r),o=(0,a.decode)(t.readByte(),t,r);s.set(e,o)}return s}},8400:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.decodeMapStream=void 0;const o=r(2337),n=r(7457),a=r(4917);t.decodeMapStream=async(e,t,r,d=new Map)=>{if((240&e)!==n.ETypeByteCode.Map)throw new Error(`Provaded incorrect type ${e} for decoding map`);const i=7&e;if(0===i)return d;const y=(0,o.bytesToInteger)(await t.readStreamBytes(i)),s=d;for(let e=0;e<y;e+=1){const e=await(0,a.decodeStream)(await t.readStreamByte(),t,r),o=await(0,a.decodeStream)(await t.readStreamByte(),t,r);s.set(e,o)}return s}},1028:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.decodeObject=void 0;const o=r(2337),n=r(7457),a=r(1434);t.decodeObject=(e,t,r,d={})=>{if((240&e)!==n.ETypeByteCode.Object)throw new Error(`Provaded incorrect type ${e} for decoding object`);const i=7&e;if(0===i)return d;const y=(0,o.bytesToInteger)(t.readBytes(i)),s=d;for(let e=0;e<y;e+=1){const e=(0,a.decode)(t.readByte(),t,r),o=(0,a.decode)(t.readByte(),t,r);s[e]=o}return s}},6512:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.decodeObjectStream=void 0;const o=r(2337),n=r(7457),a=r(4917);t.decodeObjectStream=async(e,t,r,d={})=>{if((240&e)!==n.ETypeByteCode.Object)throw new Error(`Provaded incorrect type ${e} for decoding object`);const i=7&e;if(0===i)return d;const y=(0,o.bytesToInteger)(await t.readStreamBytes(i)),s=d;for(let e=0;e<y;e+=1){const e=await(0,a.decodeStream)(await t.readStreamByte(),t,r),o=await(0,a.decodeStream)(await t.readStreamByte(),t,r);s[e]=o}return s}},5147:function(e,t,r){var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.decodeRef=void 0;const n=r(2337),a=r(7457),d=o(r(9896)),i=r(1434),y=r(5420);t.decodeRef=(e,t,r)=>{if((240&e)!==a.ETypeByteCode.Refs)throw new Error(`Provaded incorrect type ${e} for decoding ref`);const o=Boolean(8&e),s=7&e,c=0===s?0:(0,n.bytesToInteger)(t.readBytes(s)),l=r.context.refs;if(!(c in l))throw new Error(`Incorrect ref ID ${c}, max id is ${l.length}`);if(o){const e=r.context.refByteSlice[c],t=r.context.readBytes.slice(e.index,e.index+e.length),o=(0,y.createDecodeOptions)();o.context=r.context;const n=new d.default(t);return n.completeStream(),(0,i.decode)(null,n,o)}return l[c]}},804:function(e,t,r){var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.decodeRefStream=void 0;const n=r(2337),a=r(7457),d=o(r(9896)),i=r(1434),y=r(5420);t.decodeRefStream=async(e,t,r)=>{if((240&e)!==a.ETypeByteCode.Refs)throw new Error(`Provaded incorrect type ${e} for decoding ref`);const o=Boolean(8&e),s=7&e,c=0===s?0:(0,n.bytesToInteger)(await t.readStreamBytes(s)),l=r.context.refs;if(!(c in l))throw new Error(`Incorrect ref ID ${c}, max id is ${l.length}`);if(o){const e=r.context.refByteSlice[c],t=r.context.readBytes.slice(e.index,e.index+e.length),o=(0,y.createDecodeOptions)();o.context=r.context;const n=new d.default(t);return n.completeStream(),(0,i.decode)(null,n,o)}return l[c]}},8514:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.decodeSet=void 0;const o=r(2337),n=r(7457),a=r(1434);t.decodeSet=(e,t,r,d=new Set)=>{if((240&e)!==n.ETypeByteCode.Set)throw new Error(`Provaded incorrect type ${e} for decoding set`);const i=7&e;if(0===i)return d;const y=(0,o.bytesToInteger)(t.readBytes(i)),s=d;for(let e=0;e<y;e+=1){const e=(0,a.decode)(t.readByte(),t,r);s.add(e)}return s}},858:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.decodeSetStream=void 0;const o=r(2337),n=r(7457),a=r(4917);t.decodeSetStream=async(e,t,r,d=new Set)=>{if((240&e)!==n.ETypeByteCode.Set)throw new Error(`Provaded incorrect type ${e} for decoding set`);const i=7&e;if(0===i)return d;const y=(0,o.bytesToInteger)(await t.readStreamBytes(i)),s=d;for(let e=0;e<y;e+=1){const e=await(0,a.decodeStream)(await t.readStreamByte(),t,r);s.add(e)}return s}},4917:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.decodeStream=void 0;const o=r(7457),n=r(4861),a=r(9898),d=r(3558),i=r(4834),y=r(5708),s=r(6635),c=r(8400),l=r(6512),f=r(804),p=r(858),u=r(3956),g=r(2633),B=r(8689);t.decodeStream=async(e,t,r)=>{const{refs:h,refByteSlice:_}=r.context;null===e&&(e=await t.readStreamByte());const E=240&e,b=!(E===o.ETypeByteCode.Refs),C=h.length;let m,T=!0;b&&(h.push(void 0),_.push({index:t.getReadBytesIndex()-1,length:0}));let A=!1;switch(E){case o.ETypeByteCode.Refs:m=await(0,f.decodeRefStream)(e,t,r),A=!0,T=!1;break;case o.ETypeByteCode.Constant:m=await(0,d.decodeConstantStream)(e,t),A=!0,T=!1;break;case o.ETypeByteCode.String:m=await(0,u.decodeStringStream)(e,t),A=!0,T=m.length>2;break;case o.ETypeByteCode.Integer:m=await(0,s.decodeIntegerStream)(e,t),A=!0,T=m>255||m<-255;break;case o.ETypeByteCode.Float:m=await(0,y.decodeFloatStream)(e,t),A=!0,T=!0;break;case o.ETypeByteCode.BigInt:m=await(0,a.decodeBigIntStream)(e,t),A=!0,T=!0;break;case o.ETypeByteCode.Array:m=await(0,n.decodeArrayStream)(e,t,r,h[C]=[]),A=!0,T=!0;break;case o.ETypeByteCode.Typed_Array:m=await(0,B.decodeTypedArrayStream)(e,t,r),A=!0;break;case o.ETypeByteCode.Object:m=await(0,l.decodeObjectStream)(e,t,r,h[C]={}),A=!0,T=!0;break;case o.ETypeByteCode.Set:m=await(0,p.decodeSetStream)(e,t,r,h[C]=new Set),A=!0,T=!0;break;case o.ETypeByteCode.Map:m=await(0,c.decodeMapStream)(e,t,r,h[C]=new Map),A=!0,T=!0;break;case o.ETypeByteCode.Symbol:m=await(0,g.decodeSymbolStream)(e,t),A=!0,T=!0;break;case o.ETypeByteCode.Date:m=await(0,i.decodeDateStream)(e,t),A=!0,T=Math.abs(m.getTime())>255}if(!1===A)throw new Error(`Unsupported decoding value: "${e}"`);return b&&(T?(h[C]=m,_[C].length=t.getReadBytesIndex()-_[C].index):(h.pop(),_.pop())),m}},4184:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.decodeString=void 0;const o=r(2337),n=r(9835),a=r(7457);t.decodeString=(e,t)=>{if((240&e)!==a.ETypeByteCode.String)throw new Error(`Provaded incorrect type ${e} for decoding string`);const r=7&e;if(0===r)return"";const d=t.readBytes(r),i=(0,o.bytesToInteger)(d),y=t.readBytes(i);return(0,n.bytesToUtf16)(y)}},3956:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.decodeStringStream=void 0;const o=r(2337),n=r(9835),a=r(7457);t.decodeStringStream=async(e,t)=>{if((240&e)!==a.ETypeByteCode.String)throw new Error(`Provaded incorrect type ${e} for decoding string`);const r=7&e;if(0===r)return"";const d=await t.readStreamBytes(r),i=(0,o.bytesToInteger)(d),y=await t.readStreamBytes(i);return(0,n.bytesToUtf16)(y)}},7185:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.decodeSymbol=void 0;const o=r(2337),n=r(9835),a=r(7457);t.decodeSymbol=(e,t)=>{if((240&e)!==a.ETypeByteCode.Symbol)throw new Error(`Provaded incorrect type ${e} for decoding symbol`);const r=7&e;if(0===r)return Symbol.for("");const d=t.readBytes(r),i=(0,o.bytesToInteger)(d),y=t.readBytes(i);return Symbol.for((0,n.bytesToUtf16)(y))}},2633:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.decodeSymbolStream=void 0;const o=r(2337),n=r(9835),a=r(7457);t.decodeSymbolStream=async(e,t)=>{if((240&e)!==a.ETypeByteCode.Symbol)throw new Error(`Provaded incorrect type ${e} for decoding symbol`);const r=7&e;if(0===r)return Symbol.for("");const d=await t.readStreamBytes(r),i=(0,o.bytesToInteger)(d),y=await t.readStreamBytes(i);return Symbol.for((0,n.bytesToUtf16)(y))}},2658:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.decodeTypedArray=t.dataViewGetter=t.typedArrayConstructorByType=void 0;const o=r(2337),n=r(7457),a=r(3823),d=r(9204),i=r(6685);t.typedArrayConstructorByType={[a.ETypedArrayByteCode.ArrayBuffer]:Uint8Array,[a.ETypedArrayByteCode.Int8Array]:Int8Array,[a.ETypedArrayByteCode.Uint8Array]:Uint8Array,[a.ETypedArrayByteCode.Uint8ClampedArray]:Uint8ClampedArray,[a.ETypedArrayByteCode.Int16Array]:Int16Array,[a.ETypedArrayByteCode.Uint16Array]:Uint16Array,[a.ETypedArrayByteCode.Int32Array]:Int32Array,[a.ETypedArrayByteCode.Uint32Array]:Uint32Array,[a.ETypedArrayByteCode.Float32Array]:Float32Array,[a.ETypedArrayByteCode.Float64Array]:Float64Array,[a.ETypedArrayByteCode.BigInt64Array]:BigInt64Array,[a.ETypedArrayByteCode.BigUint64Array]:BigInt64Array},t.dataViewGetter={[a.ETypedArrayByteCode.ArrayBuffer]:"getUint8",[a.ETypedArrayByteCode.Int8Array]:"getInt8",[a.ETypedArrayByteCode.Uint8Array]:"getUint8",[a.ETypedArrayByteCode.Uint8ClampedArray]:"getUint8",[a.ETypedArrayByteCode.Int16Array]:"getInt16",[a.ETypedArrayByteCode.Uint16Array]:"getUint16",[a.ETypedArrayByteCode.Int32Array]:"getInt32",[a.ETypedArrayByteCode.Uint32Array]:"getUint32",[a.ETypedArrayByteCode.Float32Array]:"getFloat32",[a.ETypedArrayByteCode.Float64Array]:"getFloat64",[a.ETypedArrayByteCode.BigInt64Array]:"getBigInt64",[a.ETypedArrayByteCode.BigUint64Array]:"getBigInt64"},t.decodeTypedArray=(e,r,y)=>{if((240&e)!==n.ETypeByteCode.Typed_Array)throw new Error(`Provaded incorrect type ${e} for decoding typed array`);const s=r.readByte(),c=64&s,l=7&s,f=(56&s)>>>3,p=t.typedArrayConstructorByType[e],u=new p(0),g=(0,d.getBytesPerElement)(u),B=c?(0,o.bytesToInteger)(r.readBytes(f)):(0,o.bytesToInteger)(r.readBytes(l)),h=c?(0,o.bytesToInteger)(r.readBytes(l)):B,_=t.dataViewGetter[e];if(c){const t=new p(Math.round(B/g));for(let e=0;e<h;e+=1){const e=(0,i.decodeInteger)(r.readByte(),r),o=r.readBytes(g),n=new DataView(o.buffer);t[e]=n[_](0,!0)}return e===a.ETypedArrayByteCode.ArrayBuffer?t.buffer:t}{const t=new p(B),o=new DataView(r.readBytes(g*B).buffer);for(let e=0;e<B;e+=1)t[e]=o[_](e*g,!0);return e===a.ETypedArrayByteCode.ArrayBuffer?t.buffer:t}}},8689:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.decodeTypedArrayStream=void 0;const o=r(2337),n=r(7457),a=r(3823),d=r(9204),i=r(6635),y=r(2658);t.decodeTypedArrayStream=async(e,t,r)=>{if((240&e)!==n.ETypeByteCode.Typed_Array)throw new Error(`Provaded incorrect type ${e} for decoding typed array`);const s=await t.readStreamByte(),c=64&s,l=7&s,f=(56&s)>>>3,p=y.typedArrayConstructorByType[e],u=new p(0),g=(0,d.getBytesPerElement)(u),B=c?(0,o.bytesToInteger)(await t.readStreamBytes(f)):(0,o.bytesToInteger)(await t.readStreamBytes(l)),h=c?(0,o.bytesToInteger)(await t.readStreamBytes(l)):B,_=y.dataViewGetter[e];if(c){const r=new p(Math.round(B/g));for(let e=0;e<h;e+=1){const e=await(0,i.decodeIntegerStream)(await t.readStreamByte(),t),o=await t.readStreamBytes(g),n=new DataView(o.buffer);r[e]=n[_](0,!0)}return e===a.ETypedArrayByteCode.ArrayBuffer?r.buffer:r}{const r=new p(B),o=new DataView((await t.readStreamBytes(g*B)).buffer);for(let e=0;e<B;e+=1)r[e]=o[_](e*g,!0);return e===a.ETypedArrayByteCode.ArrayBuffer?r.buffer:r}}},5420:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.createDecodeOptions=void 0,t.createDecodeOptions=()=>({context:{refs:[],refByteSlice:[],readBytes:[]}})},5902:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.encode=void 0;const o=r(645),n=r(5792),a=r(8198),d=r(1882),i=r(2075),y=r(7039),s=r(1239),c=r(5763),l=r(5332),f=r(9342),p=r(4899),u=r(7747),g=r(5326),B=r(3139),h=r(6243),_=r(4501),E=r(7274),b=r(3193),C=r(8760),m=r(3294),T=r(4810),A=r(7202),w=r(632);t.encode=(e,t)=>{const r=t.context;let v=null;if(t.refs?.enabled){if(v=r.refMap.get(e)||null,v)return v.encodedRefLink||(v.encodedRefLink=(0,b.encodeRef)("link",v.refId,t)),v.encodedRefLink;v={refId:r.refMap.size,encodedRefLink:null,encodedRefCopy:null},r.refMap.set(e,v)}let S=null,I=!1;const M=typeof e;switch(M){case"undefined":I=!1,S=(0,w.encodeUndefined)();break;case"boolean":I=!1,S=(0,l.encodeBoolean)(e);break;case"number":if((0,n.isInteger)(e)){I=e>255||e<-255,S=(0,g.encodeInteger)(e);break}if((0,o.isFloat)(e)){I=!0,S=(0,p.encodeFloat)(e);break}if(Number.isNaN(e)){I=!1,S=(0,h.encodeNaN)();break}if(e===1/0||e===-1/0){I=!1,S=(0,u.encodeInfinity)(e);break}break;case"string":I=e.length>2,S=(0,m.encodeString)(e);break;case"object":if(null===e){I=!1,S=(0,_.encodeNull)();break}if(Array.isArray(e)){I=!0,S=(0,s.encodeArray)(e,t);break}if((0,d.isObject)(e)){I=!0,S=(0,E.encodeObject)(e,t);break}if((0,i.isSet)(e)){I=!0,S=(0,C.encodeSet)(e,t);break}if((0,a.isMap)(e)){I=!0,S=(0,B.encodeMap)(e,t);break}if((0,y.isTypedArray)(e)){I=!0,S=(0,A.encodeTypedArray)(e,t);break}if(e instanceof Date){I=Math.abs(e.getTime())>255,S=(0,f.encodeDate)(e,t);break}break;case"bigint":I=!0,S=(0,c.encodeBigInt)(e);break;case"symbol":I=!0,S=(0,T.encodeSymbol)(e)}if(null===S)throw new Error(`Unsupported encoding value: "${e}", type: "${M}"`);if(v)if(I){const e=r.refCopy.get(S);if(e)return v.encodedRefCopy||(v.encodedRefCopy=(0,b.encodeRef)("copy",e.refId,t)),v.encodedRefCopy;r.refCopy.set(S,v)}else r.refMap.delete(e);return S}},1239:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.encodeArray=void 0;const o=r(7457),n=r(242),a=r(4894),d=r(9399),i=r(9082),y=r(5644),s=r(5326),c=r(5902),l=(0,i.toChar)(240&o.ETypeByteCode.Array);t.encodeArray=(e,t)=>{if(!Array.isArray(e))throw new Error(`Expecting "array" type, received "${e}" (${typeof e})`);if(0===e.length)return l;if(e.length>n.MAX_7_BYTES_INTEGER)throw new Error(`Provided array has too large length, limit ${n.MAX_7_BYTES_INTEGER}, received ${e.length}`);const r=(0,d.getFilledItemsCount)(e),f=r/e.length<.5,p=(0,a.integerToBytes)(e.length),u=[];if(u.push((0,i.toChar)(o.ETypeByteCode.Array|7&p.length|(f?8:0))),u.push((0,i.toChar)(...p)),f){const o=(0,a.integerToBytes)(r,p.length);u.push((0,i.toChar)(...o)),e.forEach(((e,r)=>{u.push((0,s.encodeInteger)(r)),u.push((0,c.encode)(e,t))}))}else for(let r=0;r<e.length;r+=1){const o=!(String(r)in e);u.push(o?(0,y.encodeEmptyValue)():(0,c.encode)(e[r],t))}return u.join("")}},5763:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.encodeBigInt=void 0;const o=r(7457),n=r(68),a=r(4894),d=r(9082),i=r(1910),y=(0,d.toChar)(240&o.ETypeByteCode.BigInt);t.encodeBigInt=e=>{if(!(0,i.isBigInt)(e))throw new Error(`Expecting "bigint" type, received "${e}" (${typeof e})`);if(0n===e)return y;const t=e<0n?-e:e,r=e>0,s=[],c=(0,n.bigIntToBytes)(t),l=(0,a.integerToBytes)(c.length);return s.push((0,d.toChar)(o.ETypeByteCode.BigInt|7&l.length|(r?0:8))),s.push((0,d.toChar)(...l)),s.push((0,d.toChar)(...c.map((e=>Number(e))))),s.join("")}},5332:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.encodeBoolean=void 0;const o=r(9475),n=r(9082),a=(0,n.toChar)(o.EConstantByteCode.TRUE),d=(0,n.toChar)(o.EConstantByteCode.FALSE);t.encodeBoolean=e=>{if("boolean"!=typeof e)throw new Error(`Expecting "boolean" type, received "${e}" (${typeof e})`);return e?a:d}},9342:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.encodeDate=void 0;const o=r(7457),n=r(242),a=r(4894),d=r(9082),i=(0,d.toChar)(240&o.ETypeByteCode.Date);t.encodeDate=(e,t)=>{if(!(e instanceof Date))throw new Error(`Expecting "Date" type, received "${e}" (${typeof e})`);const r=e.getTime();if(Math.abs(r)>n.MAX_DATE_INTEGER)throw new Error("Can not encode invalid date");if(0===r)return i;const y=[],s=Math.abs(r),c=r>0,l=(0,a.integerToBytes)(s);return y.push((0,d.toChar)(o.ETypeByteCode.Date|7&l.length|(c?0:8))),y.push((0,d.toChar)(...l)),y.join("")}},5644:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.encodeEmptyValue=void 0;const o=r(9475),n=(0,r(9082).toChar)(o.EConstantByteCode.Empty_Value);t.encodeEmptyValue=()=>n},4899:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.encodeFloat=void 0;const o=r(6725),n=r(7457),a=r(9082),d=r(645);t.encodeFloat=(e,t=!0)=>{if(!(0,d.isFloat)(e))throw new Error(`Expecting "float" type, received "${e}" (${typeof e})`);const r=(0,o.doubleToBytes)(e),i=[],y=[];let s=0;if(t)for(let e=0;e<8;e+=1){const t=r[e];t&&(s+=2**(7-e),y.push(t))}for(;!r[0]&&r.length;)r.shift();const c=t&&s&&y.length<r.length-1;return i.push((0,a.toChar)(n.ETypeByteCode.Float|7&(c?y.length:r.length)-1|(c?8:0))),c&&i.push((0,a.toChar)(s)),i.push((0,a.toChar)(...c?y:r)),i.join("")}},7747:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.encodeInfinity=void 0;const o=r(9475),n=r(9082),a=(0,n.toChar)(o.EConstantByteCode.Pos_Infinity),d=(0,n.toChar)(o.EConstantByteCode.Neg_Infinity);t.encodeInfinity=e=>{if(e!==1/0&&e!==-1/0)throw new Error(`Expecting "Infinity", received "${e}" (${typeof e})`);return e>0?a:d}},5326:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.encodeInteger=void 0;const o=r(7457),n=r(242),a=r(4894),d=r(9082),i=r(5792),y=(0,d.toChar)(240&o.ETypeByteCode.Integer),s=(0,d.toChar)(240&o.ETypeByteCode.Integer|8);t.encodeInteger=e=>{if(!(0,i.isInteger)(e))throw new Error(`Expecting "integer" type, received "${e}" (${typeof e})`);if(Math.abs(e)>n.MAX_7_BYTES_INTEGER)throw new Error("Can not encode unsafe integer");if(0===e)return Object.is(e,0)?y:s;const t=[],r=Math.abs(e),c=e>0,l=(0,a.integerToBytes)(r);return t.push((0,d.toChar)(o.ETypeByteCode.Integer|7&l.length|(c?0:8))),t.push((0,d.toChar)(...l)),t.join("")}},3139:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.encodeMap=void 0;const o=r(7457),n=r(242),a=r(9082),d=r(4894),i=r(8198),y=r(5902),s=(0,a.toChar)(240&o.ETypeByteCode.Map);t.encodeMap=(e,t)=>{if(!(0,i.isMap)(e))throw new Error(`Expecting "map" type, received "${e}" (${typeof e})`);if(0===e.size)return s;if(e.size>n.MAX_7_BYTES_INTEGER)throw new Error(`Provided map has too many items, limit ${n.MAX_7_BYTES_INTEGER}, received ${e.size}`);const r=(0,d.integerToBytes)(e.size),c=[];return c.push((0,a.toChar)(o.ETypeByteCode.Map|7&r.length)),c.push((0,a.toChar)(...r)),e.forEach(((e,r)=>{c.push((0,y.encode)(r,t)),c.push((0,y.encode)(e,t))})),c.join("")}},6243:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.encodeNaN=void 0;const o=r(9475),n=(0,r(9082).toChar)(o.EConstantByteCode.NaN);t.encodeNaN=()=>n},4501:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.encodeNull=void 0;const o=r(9475),n=(0,r(9082).toChar)(o.EConstantByteCode.Null);t.encodeNull=()=>n},7274:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.encodeObject=void 0;const o=r(7457),n=r(242),a=r(1882),d=r(9082),i=r(4894),y=r(5902),s=(0,d.toChar)(240&o.ETypeByteCode.Object);t.encodeObject=(e,t)=>{if(!(0,a.isObject)(e))throw new Error(`Expecting "object" type, received "${e}" (${typeof e})`);const r=[];let c=0;for(const o in e)e.hasOwnProperty(o)&&(r.push((0,y.encode)(o,t)),r.push((0,y.encode)(e[o],t)),c+=1);for(const o of Object.getOwnPropertySymbols(e))r.push((0,y.encode)(o,t)),r.push((0,y.encode)(e[o],t)),c+=1;if(0===c)return s;if(c>n.MAX_7_BYTES_INTEGER)throw new Error(`Provided object has too many props, limit ${n.MAX_7_BYTES_INTEGER}, received ${c}`);const l=[],f=(0,i.integerToBytes)(c);return l.push((0,d.toChar)(o.ETypeByteCode.Object|7&f.length)),l.push((0,d.toChar)(...f)),l.join("")+r.join("")}},3193:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.encodeRef=void 0;const o=r(7457),n=r(242),a=r(9082),d=r(4894),i=r(5792);t.encodeRef=(e,t,r)=>{if(!(0,i.isInteger)(t))throw new Error(`Expecting "integer" type, received "${t}" (${typeof t})`);if(Math.abs(t)>n.MAX_7_BYTES_INTEGER)throw new Error("Can not encode unsafe integer");const y=[],s=(0,d.integerToBytes)(t);return y.push((0,a.toChar)(o.ETypeByteCode.Refs|("copy"===e?8:0)|7&s.length)),y.push((0,a.toChar)(...s)),y.join("")}},8760:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.encodeSet=void 0;const o=r(7457),n=r(242),a=r(9082),d=r(4894),i=r(2075),y=r(5902),s=(0,a.toChar)(240&o.ETypeByteCode.Set);t.encodeSet=(e,t)=>{if(!(0,i.isSet)(e))throw new Error(`Expecting "set" type, received "${e}" (${typeof e})`);if(0===e.size)return s;if(e.size>n.MAX_7_BYTES_INTEGER)throw new Error(`Provided set has too many items, limit ${n.MAX_7_BYTES_INTEGER}, received ${e.size}`);const r=(0,d.integerToBytes)(e.size),c=[];return c.push((0,a.toChar)(o.ETypeByteCode.Set|7&r.length)),c.push((0,a.toChar)(...r)),e.forEach((e=>{c.push((0,y.encode)(e,t))})),c.join("")}},3294:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.encodeString=void 0;const o=r(7457),n=r(242),a=r(7106),d=r(4894),i=r(9082),y=(0,i.toChar)(240&o.ETypeByteCode.String);t.encodeString=e=>{if("string"!=typeof e)throw new Error(`Expecting "string" type, received "${e}" (${typeof e})`);if(""===e)return y;const t=[],r=(0,a.getBytesSizeForString)(e);if(r>n.MAX_7_BYTES_INTEGER)throw new Error(`Too large string. ${r} bytes, limit ${n.MAX_7_BYTES_INTEGER}`);const s=(0,d.integerToBytes)(r);return t.push((0,i.toChar)(o.ETypeByteCode.String|7&s.length)),t.push((0,i.toChar)(...s)),t.push(e),t.join("")}},4810:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.encodeSymbol=void 0;const o=r(7457),n=r(242),a=r(7106),d=r(4894),i=r(9082);t.encodeSymbol=e=>{if("symbol"!=typeof e)throw new Error(`Expecting "symbol" type, received "${String(e)}" (${typeof e})`);const t=[],r=Symbol.keyFor(e);if(void 0===r)throw new Error(`Not found key for symbol ${String(e)}`);const y=(0,a.getBytesSizeForString)(r);if(y>n.MAX_7_BYTES_INTEGER)throw new Error(`Too large symbol key. ${y} bytes, limit ${n.MAX_7_BYTES_INTEGER}`);const s=(0,d.integerToBytes)(y);return t.push((0,i.toChar)(o.ETypeByteCode.Symbol|7&s.length)),s.length&&t.push((0,i.toChar)(...s)),r&&t.push(r),t.join("")}},7202:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.encodeTypedArray=void 0;const o=r(242),n=r(4894),a=r(9082),d=r(7039),i=r(5326),y=r(9204),s=r(3823),c=r(9616),l=r(2977),f={ArrayBuffer:s.ETypedArrayByteCode.ArrayBuffer,Int8Array:s.ETypedArrayByteCode.Int8Array,Uint8Array:s.ETypedArrayByteCode.Uint8Array,Uint8ClampedArray:s.ETypedArrayByteCode.Uint8ClampedArray,Int16Array:s.ETypedArrayByteCode.Int16Array,Uint16Array:s.ETypedArrayByteCode.Uint16Array,Int32Array:s.ETypedArrayByteCode.Int32Array,Uint32Array:s.ETypedArrayByteCode.Uint32Array,Float32Array:s.ETypedArrayByteCode.Float32Array,Float64Array:s.ETypedArrayByteCode.Float64Array,BigInt64Array:s.ETypedArrayByteCode.BigInt64Array,BigUint64Array:s.ETypedArrayByteCode.BigUint64Array};t.encodeTypedArray=(e,t)=>{if(!(0,d.isTypedArray)(e))throw new Error(`Expecting "typedArray" type, received "${e}" (${typeof e})`);const r=e.constructor.name,s=f[r];if(0===e.byteLength)return(0,a.toChar)(s,0);const p=e instanceof ArrayBuffer?new Uint8Array(e):e,u=(0,y.getBytesPerElement)(e),g=(0,c.getFilledItemsCount)(e);if(e.byteLength>o.MAX_7_BYTES_INTEGER)throw new Error(`Provided typed array has too large length, limit ${o.MAX_7_BYTES_INTEGER}, received ${e.byteLength}`);const B=[],h=(0,l.calculateByteCountVariants)(e),_=h.envValueSize<=h.encKeyValueSize;B.push((0,a.toChar)(s));const E=(0,n.integerToBytes)(e.byteLength),b=(0,n.integerToBytes)(p.length),C=(0,n.integerToBytes)(g);if(B.push((0,a.toChar)(0|(_?0:64)|(_?0:(7&E.length)<<3)|(_?7&b.length:7&C.length))),_){B.push((0,a.toChar)(...b));const t=new Uint8Array(e instanceof ArrayBuffer?e:e.buffer);B.push((0,a.toChar)(...t))}else{B.push((0,a.toChar)(...E)),B.push((0,a.toChar)(...C));for(let e=0;e<p.length;e+=1)if(p[e]){const t=new Uint8Array(p.buffer,e*u,u);B.push((0,i.encodeInteger)(e)),B.push((0,a.toChar)(...t))}}return B.join("")}},632:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.encodeUndefined=void 0;const o=r(9475),n=(0,r(9082).toChar)(o.EConstantByteCode.Undefined);t.encodeUndefined=()=>n},2907:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.createEncodeOptions=void 0,t.createEncodeOptions=()=>({refs:{enabled:!1},context:{refMap:new Map,refCopy:new Map}})},9475:(e,t,r)=>{var o;Object.defineProperty(t,"__esModule",{value:!0}),t.EConstantByteCode=void 0,r(7457),function(e){e[e.FALSE=0]="FALSE",e[e.TRUE=1]="TRUE",e[e.Null=2]="Null",e[e.Undefined=3]="Undefined",e[e.NaN=4]="NaN",e[e.Pos_Infinity=5]="Pos_Infinity",e[e.Neg_Infinity=6]="Neg_Infinity",e[e.Empty_Value=7]="Empty_Value"}(o||(t.EConstantByteCode=o={}))},7457:(e,t)=>{var r;Object.defineProperty(t,"__esModule",{value:!0}),t.ETypeByteCode=void 0,function(e){e[e.Constant=0]="Constant",e[e.String=16]="String",e[e.Integer=32]="Integer",e[e.Float=48]="Float",e[e.BigInt=64]="BigInt",e[e.Array=80]="Array",e[e.Typed_Array=96]="Typed_Array",e[e.Object=112]="Object",e[e.Set=128]="Set",e[e.Map=144]="Map",e[e.Symbol=160]="Symbol",e[e.Refs=176]="Refs",e[e.Date=192]="Date"}(r||(t.ETypeByteCode=r={}))},3823:(e,t,r)=>{var o;Object.defineProperty(t,"__esModule",{value:!0}),t.ETypedArrayByteCode=void 0,r(7457),function(e){e[e.ArrayBuffer=96]="ArrayBuffer",e[e.Int8Array=97]="Int8Array",e[e.Uint8Array=98]="Uint8Array",e[e.Uint8ClampedArray=99]="Uint8ClampedArray",e[e.Int16Array=100]="Int16Array",e[e.Uint16Array=101]="Uint16Array",e[e.Int32Array=102]="Int32Array",e[e.Uint32Array=103]="Uint32Array",e[e.Float32Array=104]="Float32Array",e[e.Float64Array=105]="Float64Array",e[e.BigInt64Array=106]="BigInt64Array",e[e.BigUint64Array=107]="BigUint64Array"}(o||(t.ETypedArrayByteCode=o={}))},3465:function(e,t,r){var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.JSBT=t.ByteStream=void 0;var n=r(9896);Object.defineProperty(t,"ByteStream",{enumerable:!0,get:function(){return o(n).default}});var a=r(290);Object.defineProperty(t,"JSBT",{enumerable:!0,get:function(){return a.JSBT}})},9896:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=class{constructor(e=[]){this._msgArrIndex=0,this._msgChrIndex=0,this._restByte=0,this._isStreamComplete=!1,this._isEOF=!1,this._waitingPromise=null,this._waitingPromiseResolver=null,this._waitingRejectTimeout=null,this._readBytes=[],this._msg=Array.isArray(e)?[...e]:[e]}getReadBytesIndex(){return this._readBytes.length}getReadBytes(){return this._readBytes}addMessage(e){Array.isArray(e)?this._msg.push(...e):this._msg.push(e),this._waitingPromise&&this._waitingPromiseResolver&&this._waitingPromiseResolver()}completeStream(e=[]){this.addMessage(e),this._isStreamComplete=!0}isCompleteMessage(){return this._isStreamComplete}isEOF(){return this._isEOF}waitMessages(e){if(this._waitingPromise)return this._waitingPromise;if(this._isStreamComplete)return Promise.reject("Can not wait completed stream");const t=new Promise(((t,r)=>{this._waitingPromiseResolver=t,this._waitingRejectTimeout=setTimeout((()=>{r(`Waiting timeout ${e}ms is riched`)}),e)})).finally((()=>{this._waitingRejectTimeout&&(clearTimeout(this._waitingRejectTimeout),this._waitingRejectTimeout=null),this._waitingPromise=null,this._waitingPromiseResolver=null}));return this._waitingPromise=t,t}async readStreamBytes(e=1,t=3e4){const r=new Uint8Array(e);let o=0;for(;o<e;){if(this._restByte){r[o]=this._restByte,this._readBytes.push(this._restByte),this._restByte=0,o+=1;continue}if(!(this._msgArrIndex in this._msg)){if(!this._isStreamComplete){await this.waitMessages(t);continue}throw this._isEOF=!0,new Error(`Can not read ${e-o} bytes`)}let n=NaN;const a=this._msg[this._msgArrIndex];"number"==typeof a?(n=a,this._msgChrIndex=0,delete this._msg[this._msgArrIndex],this._msgArrIndex+=1):(n=a.charCodeAt(this._msgChrIndex),n>255&&(this._restByte=(65280&n)>>>8,n&=255),this._msgChrIndex+=1),Number.isNaN(n)?(delete this._msg[this._msgArrIndex],this._msgArrIndex+=1,this._msgChrIndex=0):(r[o]=n,this._readBytes.push(n),o+=1)}return r}async readStreamByte(){return(await this.readStreamBytes(1))[0]}readBytes(e=1){if(!this._isStreamComplete)throw new Error("Sync bytes read is allowed only for completed stream");const t=new Uint8Array(e);let r=0;for(;r<e;){if(this._restByte){t[r]=this._restByte,this._readBytes.push(this._restByte),this._restByte=0,r+=1;continue}if(!(this._msgArrIndex in this._msg))throw this._isEOF=!0,new Error(`Can not read ${e-r} bytes`);let o=NaN;const n=this._msg[this._msgArrIndex];"number"==typeof n?(o=n,this._msgChrIndex=0,delete this._msg[this._msgArrIndex],this._msgArrIndex+=1):(o=n.charCodeAt(this._msgChrIndex),o>255&&(this._restByte=(65280&o)>>>8,o&=255),this._msgChrIndex+=1),Number.isNaN(o)?(delete this._msg[this._msgArrIndex],this._msgArrIndex+=1,this._msgChrIndex=0):(t[r]=o,this._readBytes.push(o),r+=1)}return t}readByte(){return this.readBytes(1)[0]}}},9399:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getFilledItemsCount=void 0,t.getFilledItemsCount=e=>{let t=0;return e.forEach((()=>{t+=1})),t}},9082:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.toChar=void 0,t.toChar=(...e)=>String.fromCharCode(...e)},2977:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.calculateByteCountVariants=void 0;const o=r(4894),n=r(9204);t.calculateByteCountVariants=e=>{const t=e instanceof ArrayBuffer?new Uint8Array(e):e,r=(0,n.getBytesPerElement)(t),a={envValueSize:t.byteLength,encKeyValueSize:0};for(let e=0;e<t.length;e+=1)if(t[e]){const t=(0,o.integerToBytes)(e);a.encKeyValueSize+=+(e>0?t.length:0)+1+r}return a}},9616:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getFilledItemsCount=void 0,t.getFilledItemsCount=e=>{let t=0;return(e instanceof ArrayBuffer?new Uint8Array(e):e).forEach((e=>{0!==e&&(t+=1)})),t}},9204:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getBytesPerElement=void 0,t.getBytesPerElement=e=>e instanceof ArrayBuffer?1:e.BYTES_PER_ELEMENT},1910:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.isBigInt=void 0,t.isBigInt=e=>"bigint"==typeof e},645:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.isFloat=void 0,t.isFloat=e=>"number"==typeof e&&!Number.isInteger(e)&&Number.isFinite(e)&&e%1!=0},5792:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.isInteger=void 0,t.isInteger=e=>"number"==typeof e&&Number.isInteger(e)},8198:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.isMap=void 0,t.isMap=e=>e instanceof Map},1882:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.isObject=void 0,t.isObject=e=>"object"==typeof e&&e&&!Array.isArray(e)&&"Object"===e?.constructor?.name},2075:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.isSet=void 0,t.isSet=e=>e instanceof Set},7039:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.isTypedArray=void 0,t.isTypedArray=e=>e instanceof ArrayBuffer||e instanceof Int8Array||e instanceof Uint8Array||e instanceof Uint8ClampedArray||e instanceof Int16Array||e instanceof Uint16Array||e instanceof Int32Array||e instanceof Uint32Array||e instanceof Float32Array||e instanceof Float64Array||e instanceof BigInt64Array||e instanceof BigUint64Array}},t={},r=function r(o){var n=t[o];if(void 0!==n)return n.exports;var a=t[o]={exports:{}};return e[o].call(a.exports,a,a.exports,r),a.exports}(3465);module.exports=r})();