(()=>{"use strict";var e={64:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.isInteger=void 0,t.isInteger=e=>"number"==typeof e&&Number.isInteger(e)},125:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.decodeBigIntStream=void 0;const o=r(1251),n=r(6268),a=r(6156);t.decodeBigIntStream=async(e,t)=>{if((240&e)!==a.ETypeByteCode.BigInt)throw new Error(`Provaded incorrect type ${e} for decoding bigint`);const r=7&e,d=Boolean(8&e);if(0===r)return d?-0n:0n;const i=await t.readStreamBytes(r),s=(0,n.bytesToInteger)(i),y=await t.readStreamBytes(s),c=(0,o.bytesToBigInt)(y);return d?-c:c}},137:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.decodeArray=void 0;const o=r(6268),n=r(4556),a=r(6156),d=r(6842),i=r(2186);t.decodeArray=(e,t,r,s=[])=>{if((240&e)!==a.ETypeByteCode.Array)throw new Error(`Provaded incorrect type ${e} for decoding array`);const y=8&e,c=7&e;if(0===c)return s;const p=(0,o.bytesToInteger)(t.readBytes(c)),l=y?(0,o.bytesToInteger)(t.readBytes(c)):p,f=s;if(f.length=p,y)for(let e=0;e<l;e+=1){const e=(0,i.decodeInteger)(t.readByte(),t),o=(0,d.decode)(t.readByte(),t,r);f[e]=o}else for(let e=0;e<p;e+=1){const o=t.readByte();if(o===n.EConstantByteCode.Empty_Value)continue;const a=(0,d.decode)(o,t,r);f[e]=a}return f}},141:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.encodeRef=void 0;const o=r(6156),n=r(2640),a=r(8782),d=r(9670),i=r(64);t.encodeRef=(e,t,r)=>{if(!(0,i.isInteger)(t))throw new Error(`Expecting "integer" type, received "${t}" (${typeof t})`);if(Math.abs(t)>n.MAX_7_BYTES_INTEGER)throw new Error("Can not encode unsafe integer");const s=[],y=(0,d.integerToBytes)(t);return s.push((0,a.toChar)(o.ETypeByteCode.Refs|("copy"===e?8:0)|7&y.length)),s.push((0,a.toChar)(...y)),s.join("")}},320:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.decodeSetStream=void 0;const o=r(6268),n=r(6156),a=r(7538);t.decodeSetStream=async(e,t,r,d=new Set)=>{if((240&e)!==n.ETypeByteCode.Set)throw new Error(`Provaded incorrect type ${e} for decoding set`);const i=7&e;if(0===i)return d;const s=(0,o.bytesToInteger)(await t.readStreamBytes(i)),y=d;for(let e=0;e<s;e+=1){const e=await(0,a.decodeStream)(await t.readStreamByte(),t,r);y.add(e)}return y}},479:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.encodeString=void 0;const o=r(6156),n=r(2640),a=r(9670),d=r(8782),i=(0,d.toChar)(240&o.ETypeByteCode.String);t.encodeString=e=>{if("string"!=typeof e)throw new Error(`Expecting "string" type, received "${e}" (${typeof e})`);if(""===e)return i;const t=[],r=(new TextEncoder).encode(e);if(r.byteLength>n.MAX_7_BYTES_INTEGER)throw new Error(`Too large string. ${r.byteLength} bytes, limit ${n.MAX_7_BYTES_INTEGER}`);const s=(0,a.integerToBytes)(r.byteLength);return t.push((0,d.toChar)(o.ETypeByteCode.String|7&s.length)),t.push((0,d.toChar)(...s)),t.push((0,d.toChar)(...r)),t.join("")}},507:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.createEncodeOptions=void 0,t.createEncodeOptions=()=>({refs:{enabled:!1},context:{refMap:new Map,refCopy:new Map},primitives:{objectWrappersAsPrimitiveValue:!1},objects:{classInstanceConstructorNameKey:"__jsbtConstructorName"}})},531:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.calculateByteCountVariants=void 0;const o=r(9670),n=r(598);t.calculateByteCountVariants=e=>{const t=e instanceof ArrayBuffer?new Uint8Array(e):e,r=(0,n.getBytesPerElement)(t),a={envValueSize:t.byteLength,encKeyValueSize:0};for(let e=0;e<t.length;e+=1)if(t[e]){const t=(0,o.integerToBytes)(e);a.encKeyValueSize+=+(e>0?t.length:0)+1+r}return a}},598:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getBytesPerElement=void 0,t.getBytesPerElement=e=>e instanceof ArrayBuffer?1:e.BYTES_PER_ELEMENT},632:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.bytesToUtf16=void 0,t.bytesToUtf16=e=>{const t=[],r=Array.isArray(e)?e.length:e.byteLength;for(let o=0;o<r;o+=1){const r=e[o],n=e[o+1];n>=216&&n<=219||n>=220&&n<=223?(t.push(String.fromCharCode(n<<8|r)),o+=1):t.push(String.fromCharCode(r))}return t.join("")}},1251:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.bytesToBigInt=void 0,t.bytesToBigInt=e=>{const t=Array.isArray(e)?e.length:e.byteLength;if(0===t)return 0n;let r=0n;for(let o=0;o<t;o+=1)r=BigInt(e[o])<<BigInt(8*o)|r;return r}},1310:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.encodeFloat=void 0;const o=r(6113),n=r(6156),a=r(8782),d=r(4392);t.encodeFloat=(e,t=!0)=>{if(!(0,d.isFloat)(e))throw new Error(`Expecting "float" type, received "${e}" (${typeof e})`);const r=(0,o.doubleToBytes)(e),i=[],s=[];let y=0;if(t)for(let e=0;e<8;e+=1){const t=r[e];t&&(y+=2**(7-e),s.push(t))}for(;!r[0]&&r.length;)r.shift();const c=t&&y&&s.length<r.length-1;return i.push((0,a.toChar)(n.ETypeByteCode.Float|7&(c?s.length:r.length)-1|(c?8:0))),c&&i.push((0,a.toChar)(y)),i.push((0,a.toChar)(...c?s:r)),i.join("")}},1365:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.encodeNaN=void 0;const o=r(4556),n=(0,r(8782).toChar)(o.EConstantByteCode.NaN);t.encodeNaN=()=>n},1417:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.decodeObject=void 0;const o=r(6268),n=r(6156),a=r(6842);t.decodeObject=(e,t,r,d={})=>{if((240&e)!==n.ETypeByteCode.Object)throw new Error(`Provaded incorrect type ${e} for decoding object`);const i=7&e;if(0===i)return d;const s=(0,o.bytesToInteger)(t.readBytes(i)),y=Boolean(8&e),c=y?(0,a.decode)(null,t,r):null,p=d;for(let e=0;e<s;e+=1){const e=(0,a.decode)(null,t,r),o=(0,a.decode)(null,t,r);p[e]=o}if(y){const e=r.objects.classInstanceConstructorNameKey;if(null!==e){const t=r.objects.factories[c];t?Object.setPrototypeOf(p,t.prototype):Object.defineProperty(p,e,{value:c,configurable:!0,enumerable:!1,writable:!1})}}return p}},1478:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.isSet=void 0,t.isSet=e=>e instanceof Set},1550:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.decodeConstantStream=void 0;const o=r(6156),n=r(8494);t.decodeConstantStream=async(e,t)=>{if((240&e)!==o.ETypeByteCode.Constant)throw new Error(`Provaded incorrect type ${e} for decoding contant`);if(!n.constantMap.has(e))throw new Error("Not supported contsant for decoding");return n.constantMap.get(e)}},1625:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.decodeArrayStream=void 0;const o=r(6268),n=r(4556),a=r(6156),d=r(9330),i=r(7538);t.decodeArrayStream=async(e,t,r,s=[])=>{if((240&e)!==a.ETypeByteCode.Array)throw new Error(`Provaded incorrect type ${e} for decoding array`);const y=8&e,c=7&e;if(0===c)return s;const p=(0,o.bytesToInteger)(await t.readStreamBytes(c)),l=y?(0,o.bytesToInteger)(await t.readStreamBytes(c)):p,f=s;if(f.length=p,y)for(let e=0;e<l;e+=1){const e=await(0,d.decodeIntegerStream)(await t.readStreamByte(),t),o=await(0,i.decodeStream)(await t.readStreamByte(),t,r);f[e]=o}else for(let e=0;e<p;e+=1){const o=await t.readStreamByte();if(o===n.EConstantByteCode.Empty_Value)continue;const a=await(0,i.decodeStream)(o,t,r);f[e]=a}return f}},1690:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.decodeMap=void 0;const o=r(6268),n=r(6156),a=r(6842);t.decodeMap=(e,t,r,d=new Map)=>{if((240&e)!==n.ETypeByteCode.Map)throw new Error(`Provaded incorrect type ${e} for decoding map`);const i=7&e;if(0===i)return d;const s=(0,o.bytesToInteger)(t.readBytes(i)),y=d;for(let e=0;e<s;e+=1){const e=(0,a.decode)(t.readByte(),t,r),o=(0,a.decode)(t.readByte(),t,r);y.set(e,o)}return y}},1802:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.encodeInfinity=void 0;const o=r(4556),n=r(8782),a=(0,n.toChar)(o.EConstantByteCode.Pos_Infinity),d=(0,n.toChar)(o.EConstantByteCode.Neg_Infinity);t.encodeInfinity=e=>{if(e!==1/0&&e!==-1/0)throw new Error(`Expecting "Infinity", received "${e}" (${typeof e})`);return e>0?a:d}},1884:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.isMap=void 0,t.isMap=e=>e instanceof Map},2031:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.encodeNull=void 0;const o=r(4556),n=(0,r(8782).toChar)(o.EConstantByteCode.Null);t.encodeNull=()=>n},2037:function(e,t,r){var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.decodeRefStream=void 0;const n=r(6268),a=r(6156),d=o(r(2043)),i=r(6842),s=r(5223);t.decodeRefStream=async(e,t,r)=>{if((240&e)!==a.ETypeByteCode.Refs)throw new Error(`Provaded incorrect type ${e} for decoding ref`);const o=Boolean(8&e),y=7&e,c=0===y?0:(0,n.bytesToInteger)(await t.readStreamBytes(y)),p=r.context.refs;if(!(c in p))throw new Error(`Incorrect ref ID ${c}, max id is ${p.length}`);if(o){const e=r.context.refByteSlice[c],t=r.context.readBytes.slice(e.index,e.index+e.length),o=(0,s.createDecodeOptions)();o.context=r.context;const n=new d.default(t);return n.completeStream(),(0,i.decode)(null,n,o)}return p[c]}},2043:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=class{constructor(e=[]){this._msgArrIndex=0,this._msgChrIndex=0,this._restByte=0,this._isStreamComplete=!1,this._isEOF=!1,this._waitingPromise=null,this._waitingPromiseResolver=null,this._waitingRejectTimeout=null,this._readBytes=[],this._msg=Array.isArray(e)?[...e]:[e]}getReadBytesIndex(){return this._readBytes.length}getReadBytes(){return this._readBytes}addMessage(e){Array.isArray(e)?this._msg.push(...e):this._msg.push(e),this._waitingPromise&&this._waitingPromiseResolver&&this._waitingPromiseResolver()}completeStream(e=[]){this.addMessage(e),this._isStreamComplete=!0}isCompleteMessage(){return this._isStreamComplete}isEOF(){return this._isEOF}waitMessages(e){if(this._waitingPromise)return this._waitingPromise;if(this._isStreamComplete)return Promise.reject("Can not wait completed stream");const t=new Promise((t,r)=>{this._waitingPromiseResolver=t,this._waitingRejectTimeout=setTimeout(()=>{r(`Waiting timeout ${e}ms is riched`)},e)}).finally(()=>{this._waitingRejectTimeout&&(clearTimeout(this._waitingRejectTimeout),this._waitingRejectTimeout=null),this._waitingPromise=null,this._waitingPromiseResolver=null});return this._waitingPromise=t,t}async readStreamBytes(e=1,t=3e4){const r=new Uint8Array(e);let o=0;for(;o<e;){if(this._restByte){r[o]=this._restByte,this._readBytes.push(this._restByte),this._restByte=0,o+=1;continue}if(!(this._msgArrIndex in this._msg)){if(!this._isStreamComplete){await this.waitMessages(t);continue}throw this._isEOF=!0,new Error(`Can not read ${e-o} bytes`)}let n=NaN;const a=this._msg[this._msgArrIndex];"number"==typeof a?(n=a,this._msgChrIndex=0,delete this._msg[this._msgArrIndex],this._msgArrIndex+=1):(n=a.charCodeAt(this._msgChrIndex),n>255&&(this._restByte=(65280&n)>>>8,n&=255),this._msgChrIndex+=1),Number.isNaN(n)?(delete this._msg[this._msgArrIndex],this._msgArrIndex+=1,this._msgChrIndex=0):(r[o]=n,this._readBytes.push(n),o+=1)}return r}async readStreamByte(){return(await this.readStreamBytes(1))[0]}readBytes(e=1){if(!this._isStreamComplete)throw new Error("Sync bytes read is allowed only for completed stream");const t=new Uint8Array(e);let r=0;for(;r<e;){if(this._restByte){t[r]=this._restByte,this._readBytes.push(this._restByte),this._restByte=0,r+=1;continue}if(!(this._msgArrIndex in this._msg))throw this._isEOF=!0,new Error(`Can not read ${e-r} bytes`);let o=NaN;const n=this._msg[this._msgArrIndex];"number"==typeof n?(o=n,this._msgChrIndex=0,delete this._msg[this._msgArrIndex],this._msgArrIndex+=1):(o=n.charCodeAt(this._msgChrIndex),o>255&&(this._restByte=(65280&o)>>>8,o&=255),this._msgChrIndex+=1),Number.isNaN(o)?(delete this._msg[this._msgArrIndex],this._msgArrIndex+=1,this._msgChrIndex=0):(t[r]=o,this._readBytes.push(o),r+=1)}return t}readByte(){return this.readBytes(1)[0]}}},2088:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.encodeSet=void 0;const o=r(6156),n=r(2640),a=r(8782),d=r(9670),i=r(1478),s=r(4650),y=(0,a.toChar)(240&o.ETypeByteCode.Set);t.encodeSet=(e,t)=>{if(!(0,i.isSet)(e))throw new Error(`Expecting "set" type, received "${e}" (${typeof e})`);if(0===e.size)return y;if(e.size>n.MAX_7_BYTES_INTEGER)throw new Error(`Provided set has too many items, limit ${n.MAX_7_BYTES_INTEGER}, received ${e.size}`);const r=(0,d.integerToBytes)(e.size),c=[];return c.push((0,a.toChar)(o.ETypeByteCode.Set|7&r.length)),c.push((0,a.toChar)(...r)),e.forEach(e=>{c.push((0,s.encode)(e,t))}),c.join("")}},2133:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.encodeBigInt=void 0;const o=r(6156),n=r(4379),a=r(9670),d=r(8782),i=r(3423),s=(0,d.toChar)(240&o.ETypeByteCode.BigInt);t.encodeBigInt=e=>{if(!(0,i.isBigInt)(e))throw new Error(`Expecting "bigint" type, received "${e}" (${typeof e})`);if(0n===e)return s;const t=e<0n?-e:e,r=e>0,y=[],c=(0,n.bigIntToBytes)(t),p=(0,a.integerToBytes)(c.length);return y.push((0,d.toChar)(o.ETypeByteCode.BigInt|7&p.length|(r?0:8))),y.push((0,d.toChar)(...p)),y.push((0,d.toChar)(...c.map(e=>Number(e)))),y.join("")}},2157:function(e,t,r){var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.decodeRef=void 0;const n=r(6268),a=r(6156),d=o(r(2043)),i=r(6842),s=r(5223);t.decodeRef=(e,t,r)=>{if((240&e)!==a.ETypeByteCode.Refs)throw new Error(`Provaded incorrect type ${e} for decoding ref`);const o=Boolean(8&e),y=7&e,c=0===y?0:(0,n.bytesToInteger)(t.readBytes(y)),p=r.context.refs;if(!(c in p))throw new Error(`Incorrect ref ID ${c}, max id is ${p.length}`);if(o){const e=r.context.refByteSlice[c],t=r.context.readBytes.slice(e.index,e.index+e.length),o=(0,s.createDecodeOptions)();o.context=r.context;const n=new d.default(t);return n.completeStream(),(0,i.decode)(null,n,o)}return p[c]}},2186:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.decodeInteger=void 0;const o=r(6268),n=r(6156);t.decodeInteger=(e,t)=>{if((240&e)!==n.ETypeByteCode.Integer)throw new Error(`Provaded incorrect type ${e} for decoding integer`);const r=7&e,a=Boolean(8&e);if(0===r)return a?-0:0;const d=t.readBytes(r),i=(0,o.bytesToInteger)(d);return a?-i:i}},2457:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.encodeArray=void 0;const o=r(6156),n=r(2640),a=r(9670),d=r(3081),i=r(8782),s=r(4408),y=r(7450),c=r(4650),p=(0,i.toChar)(240&o.ETypeByteCode.Array);t.encodeArray=(e,t)=>{if(!Array.isArray(e))throw new Error(`Expecting "array" type, received "${e}" (${typeof e})`);if(0===e.length)return p;if(e.length>n.MAX_7_BYTES_INTEGER)throw new Error(`Provided array has too large length, limit ${n.MAX_7_BYTES_INTEGER}, received ${e.length}`);const r=(0,d.getFilledItemsCount)(e),l=r/e.length<.5,f=(0,a.integerToBytes)(e.length),u=[];if(u.push((0,i.toChar)(o.ETypeByteCode.Array|7&f.length|(l?8:0))),u.push((0,i.toChar)(...f)),l){const o=(0,a.integerToBytes)(r,f.length);u.push((0,i.toChar)(...o)),e.forEach((e,r)=>{u.push((0,y.encodeInteger)(r)),u.push((0,c.encode)(e,t))})}else for(let r=0;r<e.length;r+=1){const o=!(String(r)in e);u.push(o?(0,s.encodeEmptyValue)():(0,c.encode)(e[r],t))}return u.join("")}},2462:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getBytesSizeForString=void 0,t.getBytesSizeForString=e=>{let t=0;for(let r=0;r<e.length;r+=1){const o=e[r];for(let e=0;e<2;e+=1){const r=o.charCodeAt(e);isNaN(r)||(t+=r<256?1:2)}}return t}},2519:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.decodePrimitiveObjectWrapper=void 0;const o=r(6156),n=r(6842);t.decodePrimitiveObjectWrapper=(e,t,r)=>{if(e!==(0|o.ETypeByteCode.Instruction))throw new Error(`Provaded incorrect type ${e} for decoding primitive object wrapper`);const a=(0,n.decode)(t.readByte(),t,r);switch(typeof a){case"string":return new String(a);case"boolean":return new Boolean(a);case"number":return new Number(a)}throw new Error(`Can not create Primitive Object Wrapper for value ${a}, type ${typeof a}`)}},2525:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.isTypedArray=void 0,t.isTypedArray=e=>"undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer||"undefined"!=typeof Int8Array&&e instanceof Int8Array||"undefined"!=typeof Uint8Array&&e instanceof Uint8Array||"undefined"!=typeof Uint8ClampedArray&&e instanceof Uint8ClampedArray||"undefined"!=typeof Int16Array&&e instanceof Int16Array||"undefined"!=typeof Uint16Array&&e instanceof Uint16Array||"undefined"!=typeof Int32Array&&e instanceof Int32Array||"undefined"!=typeof Uint32Array&&e instanceof Uint32Array||"undefined"!=typeof Float32Array&&e instanceof Float32Array||"undefined"!=typeof Float64Array&&e instanceof Float64Array||"undefined"!=typeof BigInt64Array&&e instanceof BigInt64Array||"undefined"!=typeof BigUint64Array&&e instanceof BigUint64Array},2640:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.MAX_DATE_INTEGER=t.MAX_7_BYTES_INTEGER=void 0,t.MAX_7_BYTES_INTEGER=9007199254740991,t.MAX_DATE_INTEGER=864e13},2862:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.decodeFloatStream=void 0;const o=r(6156);t.decodeFloatStream=async(e,t)=>{if((240&e)!==o.ETypeByteCode.Float)throw new Error(`Provaded incorrect type ${e} for decoding float`);const r=1+(7&e);let n=0;if(8&e)n=await t.readStreamByte();else for(let e=0;e<r;e+=1)n|=1<<e;const a=await t.readStreamBytes(r),d=new Uint8Array(8);let i=0;for(let e=0;e<8;e+=1)n&128>>>e&&(d[e]=a[i],i+=1);return new Float64Array(d.buffer)[0]}},3081:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getFilledItemsCount=void 0,t.getFilledItemsCount=e=>{let t=0;return e.forEach(()=>{t+=1}),t}},3386:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.encodeSymbol=void 0;const o=r(6156),n=r(2640),a=r(2462),d=r(9670),i=r(8782);t.encodeSymbol=e=>{if("symbol"!=typeof e)throw new Error(`Expecting "symbol" type, received "${String(e)}" (${typeof e})`);const t=[],r=Symbol.keyFor(e);if(void 0===r)throw new Error(`Not found key for symbol ${String(e)}`);const s=(0,a.getBytesSizeForString)(r);if(s>n.MAX_7_BYTES_INTEGER)throw new Error(`Too large symbol key. ${s} bytes, limit ${n.MAX_7_BYTES_INTEGER}`);const y=(0,d.integerToBytes)(s);return t.push((0,i.toChar)(o.ETypeByteCode.Symbol|7&y.length)),y.length&&t.push((0,i.toChar)(...y)),r&&t.push(r),t.join("")}},3423:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.isBigInt=void 0,t.isBigInt=e=>"bigint"==typeof e},3461:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.decodeBigInt=void 0;const o=r(1251),n=r(6268),a=r(6156);t.decodeBigInt=(e,t)=>{if((240&e)!==a.ETypeByteCode.BigInt)throw new Error(`Provaded incorrect type ${e} for decoding bigint`);const r=7&e,d=Boolean(8&e);if(0===r)return d?-0n:0n;const i=t.readBytes(r),s=(0,n.bytesToInteger)(i),y=t.readBytes(s),c=(0,o.bytesToBigInt)(y);return d?-c:c}},3578:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.encodeMap=void 0;const o=r(6156),n=r(2640),a=r(8782),d=r(9670),i=r(1884),s=r(4650),y=(0,a.toChar)(240&o.ETypeByteCode.Map);t.encodeMap=(e,t)=>{if(!(0,i.isMap)(e))throw new Error(`Expecting "map" type, received "${e}" (${typeof e})`);if(0===e.size)return y;if(e.size>n.MAX_7_BYTES_INTEGER)throw new Error(`Provided map has too many items, limit ${n.MAX_7_BYTES_INTEGER}, received ${e.size}`);const r=(0,d.integerToBytes)(e.size),c=[];return c.push((0,a.toChar)(o.ETypeByteCode.Map|7&r.length)),c.push((0,a.toChar)(...r)),e.forEach((e,r)=>{c.push((0,s.encode)(r,t)),c.push((0,s.encode)(e,t))}),c.join("")}},3815:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.decodeTypedArray=t.dataViewGetter=t.typedArrayConstructorByType=void 0;const o=r(6268),n=r(6156),a=r(5409),d=r(598),i=r(2186);t.typedArrayConstructorByType={},"undefined"!=typeof Uint8Array&&(t.typedArrayConstructorByType[a.ETypedArrayByteCode.ArrayBuffer]=Uint8Array,t.typedArrayConstructorByType[a.ETypedArrayByteCode.Uint8Array]=Uint8Array),"undefined"!=typeof Int8Array&&(t.typedArrayConstructorByType[a.ETypedArrayByteCode.Int8Array]=Int8Array),"undefined"!=typeof Uint8ClampedArray&&(t.typedArrayConstructorByType[a.ETypedArrayByteCode.Uint8ClampedArray]=Uint8ClampedArray),"undefined"!=typeof Int16Array&&(t.typedArrayConstructorByType[a.ETypedArrayByteCode.Int16Array]=Int16Array),"undefined"!=typeof Uint16Array&&(t.typedArrayConstructorByType[a.ETypedArrayByteCode.Uint16Array]=Uint16Array),"undefined"!=typeof Int32Array&&(t.typedArrayConstructorByType[a.ETypedArrayByteCode.Int32Array]=Int32Array),"undefined"!=typeof Uint32Array&&(t.typedArrayConstructorByType[a.ETypedArrayByteCode.Uint32Array]=Uint32Array),"undefined"!=typeof Float32Array&&(t.typedArrayConstructorByType[a.ETypedArrayByteCode.Float32Array]=Float32Array),"undefined"!=typeof Float64Array&&(t.typedArrayConstructorByType[a.ETypedArrayByteCode.Float64Array]=Float64Array),"undefined"!=typeof BigInt64Array&&(t.typedArrayConstructorByType[a.ETypedArrayByteCode.BigInt64Array]=BigInt64Array),"undefined"!=typeof BigUint64Array&&(t.typedArrayConstructorByType[a.ETypedArrayByteCode.BigUint64Array]=BigUint64Array),t.dataViewGetter={[a.ETypedArrayByteCode.ArrayBuffer]:"getUint8",[a.ETypedArrayByteCode.Int8Array]:"getInt8",[a.ETypedArrayByteCode.Uint8Array]:"getUint8",[a.ETypedArrayByteCode.Uint8ClampedArray]:"getUint8",[a.ETypedArrayByteCode.Int16Array]:"getInt16",[a.ETypedArrayByteCode.Uint16Array]:"getUint16",[a.ETypedArrayByteCode.Int32Array]:"getInt32",[a.ETypedArrayByteCode.Uint32Array]:"getUint32",[a.ETypedArrayByteCode.Float32Array]:"getFloat32",[a.ETypedArrayByteCode.Float64Array]:"getFloat64",[a.ETypedArrayByteCode.BigInt64Array]:"getBigInt64",[a.ETypedArrayByteCode.BigUint64Array]:"getBigInt64"},t.decodeTypedArray=(e,r,s)=>{if((240&e)!==n.ETypeByteCode.Typed_Array)throw new Error(`Provaded incorrect type ${e} for decoding typed array`);const y=r.readByte(),c=64&y,p=7&y,l=(56&y)>>>3,f=t.typedArrayConstructorByType[e],u=new f(0),B=(0,d.getBytesPerElement)(u),g=c?(0,o.bytesToInteger)(r.readBytes(l)):(0,o.bytesToInteger)(r.readBytes(p)),h=c?(0,o.bytesToInteger)(r.readBytes(p)):g,b=t.dataViewGetter[e];if(c){const t=new f(Math.round(g/B));for(let e=0;e<h;e+=1){const e=(0,i.decodeInteger)(r.readByte(),r),o=r.readBytes(B),n=new DataView(o.buffer);t[e]=n[b](0,!0)}return e===a.ETypedArrayByteCode.ArrayBuffer?t.buffer:t}{const t=new f(g),o=new DataView(r.readBytes(B*g).buffer);for(let e=0;e<g;e+=1)t[e]=o[b](e*B,!0);return e===a.ETypedArrayByteCode.ArrayBuffer?t.buffer:t}}},3991:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.encodePrimitiveObjectWrapper=void 0;const o=r(6156),n=r(8782),a=r(5825),d=r(4650);t.encodePrimitiveObjectWrapper=(e,t)=>{if(!(0,a.isPrimitiveObjectWrapper)(e))throw new Error(`Expecting Promitive Object Wrapper, received "${e}" (${typeof e})`);const r=[];return r.push((0,n.toChar)(240&o.ETypeByteCode.Instruction)),r.push((0,d.encode)(e.valueOf(),t)),r.join("")}},4379:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.bigIntToBytes=void 0,t.bigIntToBytes=(e,t=0,r=!1)=>{if(e<0&&!t)throw new Error(`byteSize param should be provided for negative bigInt ${e}`);const o=[];let n=e<0?-(e+1n):e;for(let e=1;t?e<=t:n;e+=1)o.push(0xffn&n),n>>=8n;if(e<0)for(let e=0;e<o.length;e+=1)o[e]=255n-o[e];return r?o.reverse():o}},4382:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.decodeDate=void 0;const o=r(6268),n=r(6156);t.decodeDate=(e,t)=>{if((240&e)!==n.ETypeByteCode.Date)throw new Error(`Provaded incorrect type ${e} for decoding Date`);const r=7&e,a=Boolean(8&e);if(0===r)return new Date(0);const d=t.readBytes(r),i=(0,o.bytesToInteger)(d);return new Date(a?-i:i)}},4392:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.isFloat=void 0,t.isFloat=e=>"number"==typeof e&&!Number.isInteger(e)&&Number.isFinite(e)&&e%1!=0},4408:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.encodeEmptyValue=void 0;const o=r(4556),n=(0,r(8782).toChar)(o.EConstantByteCode.Empty_Value);t.encodeEmptyValue=()=>n},4556:(e,t,r)=>{var o;Object.defineProperty(t,"__esModule",{value:!0}),t.EConstantByteCode=void 0,r(6156),function(e){e[e.FALSE=0]="FALSE",e[e.TRUE=1]="TRUE",e[e.Null=2]="Null",e[e.Undefined=3]="Undefined",e[e.NaN=4]="NaN",e[e.Pos_Infinity=5]="Pos_Infinity",e[e.Neg_Infinity=6]="Neg_Infinity",e[e.Empty_Value=7]="Empty_Value"}(o||(t.EConstantByteCode=o={}))},4650:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.encode=void 0;const o=r(5761),n=r(4392),a=r(64),d=r(1884),i=r(9231),s=r(5825),y=r(1478),c=r(2525),p=r(2457),l=r(2133),f=r(5560),u=r(6475),B=r(6766),g=r(1310),h=r(1802),b=r(7450),_=r(3578),E=r(1365),m=r(2031),C=r(6537),A=r(3991),T=r(141),w=r(2088),v=r(479),I=r(3386),S=r(6247),j=r(7344);t.encode=(e,t)=>{const r=t.context,P=t.refs?.enabled||!1;let M=e;(0,s.isPrimitiveObjectWrapper)(e)&&t.primitives.objectWrappersAsPrimitiveValue&&(M=e.valueOf());let O=null;if(P){if(O=r.refMap.get(M)||null,O)return O.encodedRefLink||(O.encodedRefLink=(0,T.encodeRef)("link",O.refId,t)),O.encodedRefLink;O={refId:r.refMap.size,encodedRefLink:null,encodedRefCopy:null},r.refMap.set(M,O)}let $=null,N=!1;const U=typeof M;switch(U){case"undefined":N=!1,$=(0,j.encodeUndefined)();break;case"boolean":N=!1,$=(0,f.encodeBoolean)(M);break;case"number":if((0,a.isInteger)(M)){N=M>255||M<-255,$=(0,b.encodeInteger)(M);break}if((0,n.isFloat)(M)){N=!0,$=(0,g.encodeFloat)(M);break}if(Number.isNaN(M)){N=!1,$=(0,E.encodeNaN)();break}if(M===1/0||M===-1/0){N=!1,$=(0,h.encodeInfinity)(M);break}break;case"string":N=M.length>2,$=(0,v.encodeString)(M);break;case"object":if(null===M){N=!1,$=(0,m.encodeNull)();break}if(Array.isArray(M)){N=!0,$=(0,p.encodeArray)(M,t);break}if((0,i.isObject)(M)){N=!0,$=(0,C.encodeObject)(M,t);break}if((0,y.isSet)(M)){N=!0,$=(0,w.encodeSet)(M,t);break}if((0,d.isMap)(M)){N=!0,$=(0,_.encodeMap)(M,t);break}if((0,c.isTypedArray)(M)){N=!0,$=(0,S.encodeTypedArray)(M,t);break}if(M instanceof Date){N=Math.abs(M.getTime())>255,$=(0,B.encodeDate)(M,t);break}if((0,s.isPrimitiveObjectWrapper)(M)){N=!0,$=(0,A.encodePrimitiveObjectWrapper)(M,t);break}if((0,o.isClassInstance)(M)){N=!0,$=(0,u.encodeClassInstance)(M,t);break}break;case"bigint":N=!0,$=(0,l.encodeBigInt)(M);break;case"symbol":N=!0,$=(0,I.encodeSymbol)(M)}if(null===$)throw new Error(`Unsupported encoding value: "${M}", type: "${U}"`);if(O)if(N){const e=r.refCopy.get($);if(e)return O.encodedRefCopy||(O.encodedRefCopy=(0,T.encodeRef)("copy",e.refId,t)),O.encodedRefCopy;r.refCopy.set($,O)}else r.refMap.delete(M);return $}},4680:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.decodeSet=void 0;const o=r(6268),n=r(6156),a=r(6842);t.decodeSet=(e,t,r,d=new Set)=>{if((240&e)!==n.ETypeByteCode.Set)throw new Error(`Provaded incorrect type ${e} for decoding set`);const i=7&e;if(0===i)return d;const s=(0,o.bytesToInteger)(t.readBytes(i)),y=d;for(let e=0;e<s;e+=1){const e=(0,a.decode)(t.readByte(),t,r);y.add(e)}return y}},5175:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.decodePrimitiveObjectWrapperStream=void 0;const o=r(6156),n=r(7538);t.decodePrimitiveObjectWrapperStream=async(e,t,r)=>{if(e!==(0|o.ETypeByteCode.Instruction))throw new Error(`Provaded incorrect type ${e} for decoding primitive object wrapper`);const a=await(0,n.decodeStream)(null,t,r);switch(typeof a){case"string":return new String(a);case"boolean":return new Boolean(a);case"number":return new Number(a)}throw new Error(`Can not create Primitive Object Wrapper for value ${a}, type ${typeof a}`)}},5198:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.decodeFloat=void 0;const o=r(6156);t.decodeFloat=(e,t)=>{if((240&e)!==o.ETypeByteCode.Float)throw new Error(`Provaded incorrect type ${e} for decoding float`);const r=1+(7&e);let n=0;if(8&e)n=t.readByte();else for(let e=0;e<r;e+=1)n|=1<<e;const a=t.readBytes(r),d=new Uint8Array(8);let i=0;for(let e=0;e<8;e+=1)n&128>>>e&&(d[e]=a[i],i+=1);return new Float64Array(d.buffer)[0]}},5223:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.createDecodeOptions=void 0,t.createDecodeOptions=()=>({context:{refs:[],refByteSlice:[],readBytes:[]},objects:{classInstanceConstructorNameKey:"__jsbtConstructorName",factories:{}}})},5409:(e,t,r)=>{var o;Object.defineProperty(t,"__esModule",{value:!0}),t.ETypedArrayByteCode=void 0,r(6156),function(e){e[e.ArrayBuffer=96]="ArrayBuffer",e[e.Int8Array=97]="Int8Array",e[e.Uint8Array=98]="Uint8Array",e[e.Uint8ClampedArray=99]="Uint8ClampedArray",e[e.Int16Array=100]="Int16Array",e[e.Uint16Array=101]="Uint16Array",e[e.Int32Array=102]="Int32Array",e[e.Uint32Array=103]="Uint32Array",e[e.Float32Array=104]="Float32Array",e[e.Float64Array=105]="Float64Array",e[e.BigInt64Array=106]="BigInt64Array",e[e.BigUint64Array=107]="BigUint64Array"}(o||(t.ETypedArrayByteCode=o={}))},5503:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.decodeStringStream=void 0;const o=r(6268),n=r(6156);t.decodeStringStream=async(e,t)=>{if((240&e)!==n.ETypeByteCode.String)throw new Error(`Provaded incorrect type ${e} for decoding string`);const r=7&e;if(0===r)return"";const a=await t.readStreamBytes(r),d=(0,o.bytesToInteger)(a),i=new TextDecoder("utf-8"),s=await t.readStreamBytes(d);return i.decode(s)}},5560:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.encodeBoolean=void 0;const o=r(4556),n=r(8782),a=(0,n.toChar)(o.EConstantByteCode.TRUE),d=(0,n.toChar)(o.EConstantByteCode.FALSE);t.encodeBoolean=e=>{if("boolean"!=typeof e)throw new Error(`Expecting "boolean" type, received "${e}" (${typeof e})`);return e?a:d}},5570:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.decodeSymbolStream=void 0;const o=r(6268),n=r(632),a=r(6156);t.decodeSymbolStream=async(e,t)=>{if((240&e)!==a.ETypeByteCode.Symbol)throw new Error(`Provaded incorrect type ${e} for decoding symbol`);const r=7&e;if(0===r)return Symbol.for("");const d=await t.readStreamBytes(r),i=(0,o.bytesToInteger)(d),s=await t.readStreamBytes(i);return Symbol.for((0,n.bytesToUtf16)(s))}},5761:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.isClassInstance=void 0,t.isClassInstance=e=>"object"==typeof e&&e&&!Array.isArray(e)&&e?.constructor?.name&&"Object"!==e.constructor.name},5825:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.isPrimitiveObjectWrapper=void 0,t.isPrimitiveObjectWrapper=e=>e instanceof Number||e instanceof String||e instanceof Boolean},6113:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.doubleToBytes=void 0,t.doubleToBytes=(e,t=!1)=>{const r=new ArrayBuffer(8);new Float64Array(r)[0]=e;const o=Array.from(new Uint8Array(r));return t?o.reverse():o}},6156:(e,t)=>{var r;Object.defineProperty(t,"__esModule",{value:!0}),t.ETypeByteCode=void 0,function(e){e[e.Constant=0]="Constant",e[e.String=16]="String",e[e.Integer=32]="Integer",e[e.Float=48]="Float",e[e.BigInt=64]="BigInt",e[e.Array=80]="Array",e[e.Typed_Array=96]="Typed_Array",e[e.Object=112]="Object",e[e.Set=128]="Set",e[e.Map=144]="Map",e[e.Symbol=160]="Symbol",e[e.Refs=176]="Refs",e[e.Date=192]="Date",e[e.Instruction=240]="Instruction"}(r||(t.ETypeByteCode=r={}))},6247:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.encodeTypedArray=void 0;const o=r(2640),n=r(9670),a=r(8782),d=r(2525),i=r(7450),s=r(598),y=r(5409),c=r(8745),p=r(531),l={ArrayBuffer:y.ETypedArrayByteCode.ArrayBuffer,Int8Array:y.ETypedArrayByteCode.Int8Array,Uint8Array:y.ETypedArrayByteCode.Uint8Array,Uint8ClampedArray:y.ETypedArrayByteCode.Uint8ClampedArray,Int16Array:y.ETypedArrayByteCode.Int16Array,Uint16Array:y.ETypedArrayByteCode.Uint16Array,Int32Array:y.ETypedArrayByteCode.Int32Array,Uint32Array:y.ETypedArrayByteCode.Uint32Array,Float32Array:y.ETypedArrayByteCode.Float32Array,Float64Array:y.ETypedArrayByteCode.Float64Array,BigInt64Array:y.ETypedArrayByteCode.BigInt64Array,BigUint64Array:y.ETypedArrayByteCode.BigUint64Array};t.encodeTypedArray=(e,t)=>{if(!(0,d.isTypedArray)(e))throw new Error(`Expecting "typedArray" type, received "${e}" (${typeof e})`);const r=e.constructor.name,y=l[r];if(0===e.byteLength)return(0,a.toChar)(y,0);const f=e instanceof ArrayBuffer?new Uint8Array(e):e,u=(0,s.getBytesPerElement)(e),B=(0,c.getFilledItemsCount)(e);if(e.byteLength>o.MAX_7_BYTES_INTEGER)throw new Error(`Provided typed array has too large length, limit ${o.MAX_7_BYTES_INTEGER}, received ${e.byteLength}`);const g=[],h=(0,p.calculateByteCountVariants)(e),b=h.envValueSize<=h.encKeyValueSize;g.push((0,a.toChar)(y));const _=(0,n.integerToBytes)(e.byteLength),E=(0,n.integerToBytes)(f.length),m=(0,n.integerToBytes)(B);if(g.push((0,a.toChar)((b?0:64)|(b?0:(7&_.length)<<3)|(b?7&E.length:7&m.length))),b){g.push((0,a.toChar)(...E));const t=new Uint8Array(e instanceof ArrayBuffer?e:e.buffer);g.push((0,a.toChar)(...t))}else{g.push((0,a.toChar)(..._)),g.push((0,a.toChar)(...m));for(let e=0;e<f.length;e+=1)if(f[e]){const t=new Uint8Array(f.buffer,e*u,u);g.push((0,i.encodeInteger)(e)),g.push((0,a.toChar)(...t))}}return g.join("")}},6268:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.bytesToInteger=void 0,t.bytesToInteger=e=>{const t=Array.isArray(e)?e.length:e.byteLength;if(0===t)return 0;let r=0;for(let o=0;o<t;o+=1)r=e[o]*256**o+r;return r}},6475:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.encodeClassInstance=void 0;const o=r(6156),n=r(2640),a=r(8782),d=r(9670),i=r(4650),s=r(5761);t.encodeClassInstance=(e,t)=>{if(!(0,s.isClassInstance)(e))throw new Error(`Expecting "object" type, received "${e}" (${typeof e})`);const r="function"==typeof e?.toJSBT?e.toJSBT():"function"==typeof e?.toJSON?e.toJSON():e.valueOf(),y=[];let c=0;const p=t.objects.classInstanceConstructorNameKey,l=p&&(r[p]||e[p])||e?.constructor?.name||"";y.push((0,i.encode)(l,t));for(const e in r)r.hasOwnProperty(e)&&(y.push((0,i.encode)(e,t)),y.push((0,i.encode)(r[e],t)),c+=1);for(const e of Object.getOwnPropertySymbols(r))y.push((0,i.encode)(e,t)),y.push((0,i.encode)(r[e],t)),c+=1;if(c>n.MAX_7_BYTES_INTEGER)throw new Error(`Provided object has too many props, limit ${n.MAX_7_BYTES_INTEGER}, received ${c}`);const f=[],u=(0,d.integerToBytes)(c);return f.push((0,a.toChar)(8|o.ETypeByteCode.Object|7&u.length)),f.push((0,a.toChar)(...u)),f.join("")+y.join("")}},6537:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.encodeObject=void 0;const o=r(6156),n=r(2640),a=r(9231),d=r(8782),i=r(9670),s=r(4650),y=(0,d.toChar)(240&o.ETypeByteCode.Object);t.encodeObject=(e,t)=>{if(!(0,a.isObject)(e))throw new Error(`Expecting "object" type, received "${e}" (${typeof e})`);const r=[];let c=0;for(const o in e)e.hasOwnProperty(o)&&(r.push((0,s.encode)(o,t)),r.push((0,s.encode)(e[o],t)),c+=1);for(const o of Object.getOwnPropertySymbols(e))r.push((0,s.encode)(o,t)),r.push((0,s.encode)(e[o],t)),c+=1;if(0===c)return y;if(c>n.MAX_7_BYTES_INTEGER)throw new Error(`Provided object has too many props, limit ${n.MAX_7_BYTES_INTEGER}, received ${c}`);const p=[],l=(0,i.integerToBytes)(c);return p.push((0,d.toChar)(o.ETypeByteCode.Object|7&l.length)),p.push((0,d.toChar)(...l)),p.join("")+r.join("")}},6766:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.encodeDate=void 0;const o=r(6156),n=r(2640),a=r(9670),d=r(8782),i=(0,d.toChar)(240&o.ETypeByteCode.Date);t.encodeDate=(e,t)=>{if(!(e instanceof Date))throw new Error(`Expecting "Date" type, received "${e}" (${typeof e})`);const r=e.getTime();if(Math.abs(r)>n.MAX_DATE_INTEGER)throw new Error("Can not encode invalid date");if(0===r)return i;const s=[],y=Math.abs(r),c=r>0,p=(0,a.integerToBytes)(y);return s.push((0,d.toChar)(o.ETypeByteCode.Date|7&p.length|(c?0:8))),s.push((0,d.toChar)(...p)),s.join("")}},6810:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.decodeSymbol=void 0;const o=r(6268),n=r(632),a=r(6156);t.decodeSymbol=(e,t)=>{if((240&e)!==a.ETypeByteCode.Symbol)throw new Error(`Provaded incorrect type ${e} for decoding symbol`);const r=7&e;if(0===r)return Symbol.for("");const d=t.readBytes(r),i=(0,o.bytesToInteger)(d),s=t.readBytes(i);return Symbol.for((0,n.bytesToUtf16)(s))}},6815:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.decodeString=void 0;const o=r(6268),n=r(6156);t.decodeString=(e,t)=>{if((240&e)!==n.ETypeByteCode.String)throw new Error(`Provaded incorrect type ${e} for decoding string`);const r=7&e;if(0===r)return"";const a=t.readBytes(r),d=(0,o.bytesToInteger)(a),i=new TextDecoder("utf-8"),s=t.readBytes(d);return i.decode(s)}},6842:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.decode=void 0;const o=r(6156),n=r(137),a=r(3461),d=r(8494),i=r(4382),s=r(5198),y=r(2186),c=r(1690),p=r(1417),l=r(2519),f=r(2157),u=r(4680),B=r(6815),g=r(6810),h=r(3815);t.decode=(e,t,r)=>{const{refs:b,refByteSlice:_}=r.context;null===e&&(e=t.readByte());const E=240&e,m=!(E===o.ETypeByteCode.Refs),C=b.length;let A,T=!0;m&&(b.push(void 0),_.push({index:t.getReadBytesIndex()-1,length:0}));let w=!1;switch(E){case o.ETypeByteCode.Refs:A=(0,f.decodeRef)(e,t,r),w=!0,T=!1;break;case o.ETypeByteCode.Constant:A=(0,d.decodeConstant)(e,t),w=!0,T=!1;break;case o.ETypeByteCode.String:A=(0,B.decodeString)(e,t),w=!0,T=A.length>2;break;case o.ETypeByteCode.Integer:A=(0,y.decodeInteger)(e,t),w=!0,T=A>255||A<-255;break;case o.ETypeByteCode.Float:A=(0,s.decodeFloat)(e,t),w=!0,T=!0;break;case o.ETypeByteCode.BigInt:A=(0,a.decodeBigInt)(e,t),w=!0,T=!0;break;case o.ETypeByteCode.Array:A=(0,n.decodeArray)(e,t,r,b[C]=[]),w=!0,T=!0;break;case o.ETypeByteCode.Typed_Array:A=(0,h.decodeTypedArray)(e,t,r),w=!0;break;case o.ETypeByteCode.Object:A=(0,p.decodeObject)(e,t,r,b[C]={}),w=!0,T=!0;break;case o.ETypeByteCode.Set:A=(0,u.decodeSet)(e,t,r,b[C]=new Set),w=!0,T=!0;break;case o.ETypeByteCode.Map:A=(0,c.decodeMap)(e,t,r,b[C]=new Map),w=!0,T=!0;break;case o.ETypeByteCode.Symbol:A=(0,g.decodeSymbol)(e,t),w=!0,T=!0;break;case o.ETypeByteCode.Date:A=(0,i.decodeDate)(e,t),w=!0,T=Math.abs(A.getTime())>255;break;case o.ETypeByteCode.Instruction:if(e!==(240|o.ETypeByteCode.Instruction))throw new Error(`Not supported instruction ${e}`);A=(0,l.decodePrimitiveObjectWrapper)(e,t,r),w=!0,T=!0}if(!1===w)throw new Error(`Unsupported decoding value: "${e}"`);return m&&(T?(b[C]=A,_[C].length=t.getReadBytesIndex()-_[C].index):(b.pop(),_.pop())),A}},7042:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.decodeMapStream=void 0;const o=r(6268),n=r(6156),a=r(7538);t.decodeMapStream=async(e,t,r,d=new Map)=>{if((240&e)!==n.ETypeByteCode.Map)throw new Error(`Provaded incorrect type ${e} for decoding map`);const i=7&e;if(0===i)return d;const s=(0,o.bytesToInteger)(await t.readStreamBytes(i)),y=d;for(let e=0;e<s;e+=1){const e=await(0,a.decodeStream)(await t.readStreamByte(),t,r),o=await(0,a.decodeStream)(await t.readStreamByte(),t,r);y.set(e,o)}return y}},7344:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.encodeUndefined=void 0;const o=r(4556),n=(0,r(8782).toChar)(o.EConstantByteCode.Undefined);t.encodeUndefined=()=>n},7450:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.encodeInteger=void 0;const o=r(6156),n=r(2640),a=r(9670),d=r(8782),i=r(64),s=(0,d.toChar)(240&o.ETypeByteCode.Integer),y=(0,d.toChar)(240&o.ETypeByteCode.Integer|8);t.encodeInteger=e=>{if(!(0,i.isInteger)(e))throw new Error(`Expecting "integer" type, received "${e}" (${typeof e})`);if(Math.abs(e)>n.MAX_7_BYTES_INTEGER)throw new Error("Can not encode unsafe integer");if(0===e)return Object.is(e,0)?s:y;const t=[],r=Math.abs(e),c=e>0,p=(0,a.integerToBytes)(r);return t.push((0,d.toChar)(o.ETypeByteCode.Integer|7&p.length|(c?0:8))),t.push((0,d.toChar)(...p)),t.join("")}},7538:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.decodeStream=void 0;const o=r(6156),n=r(1625),a=r(125),d=r(1550),i=r(9278),s=r(2862),y=r(9330),c=r(7042),p=r(8489),l=r(5175),f=r(2037),u=r(320),B=r(5503),g=r(5570),h=r(9159);t.decodeStream=async(e,t,r)=>{const{refs:b,refByteSlice:_}=r.context;null===e&&(e=await t.readStreamByte());const E=240&e,m=!(E===o.ETypeByteCode.Refs),C=b.length;let A,T=!0;m&&(b.push(void 0),_.push({index:t.getReadBytesIndex()-1,length:0}));let w=!1;switch(E){case o.ETypeByteCode.Refs:A=await(0,f.decodeRefStream)(e,t,r),w=!0,T=!1;break;case o.ETypeByteCode.Constant:A=await(0,d.decodeConstantStream)(e,t),w=!0,T=!1;break;case o.ETypeByteCode.String:A=await(0,B.decodeStringStream)(e,t),w=!0,T=A.length>2;break;case o.ETypeByteCode.Integer:A=await(0,y.decodeIntegerStream)(e,t),w=!0,T=A>255||A<-255;break;case o.ETypeByteCode.Float:A=await(0,s.decodeFloatStream)(e,t),w=!0,T=!0;break;case o.ETypeByteCode.BigInt:A=await(0,a.decodeBigIntStream)(e,t),w=!0,T=!0;break;case o.ETypeByteCode.Array:A=await(0,n.decodeArrayStream)(e,t,r,b[C]=[]),w=!0,T=!0;break;case o.ETypeByteCode.Typed_Array:A=await(0,h.decodeTypedArrayStream)(e,t,r),w=!0;break;case o.ETypeByteCode.Object:A=await(0,p.decodeObjectStream)(e,t,r,b[C]={}),w=!0,T=!0;break;case o.ETypeByteCode.Set:A=await(0,u.decodeSetStream)(e,t,r,b[C]=new Set),w=!0,T=!0;break;case o.ETypeByteCode.Map:A=await(0,c.decodeMapStream)(e,t,r,b[C]=new Map),w=!0,T=!0;break;case o.ETypeByteCode.Symbol:A=await(0,g.decodeSymbolStream)(e,t),w=!0,T=!0;break;case o.ETypeByteCode.Date:A=await(0,i.decodeDateStream)(e,t),w=!0,T=Math.abs(A.getTime())>255;break;case o.ETypeByteCode.Instruction:if(e!==(240|o.ETypeByteCode.Instruction))throw new Error(`Not supported instruction ${e}`);A=await(0,l.decodePrimitiveObjectWrapperStream)(e,t,r),w=!0,T=!0}if(!1===w)throw new Error(`Unsupported decoding value: "${e}"`);return m&&(T?(b[C]=A,_[C].length=t.getReadBytesIndex()-_[C].index):(b.pop(),_.pop())),A}},7729:function(e,t,r){var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.JSBT=t.ByteStream=void 0;var n=r(2043);Object.defineProperty(t,"ByteStream",{enumerable:!0,get:function(){return o(n).default}});var a=r(7972);Object.defineProperty(t,"JSBT",{enumerable:!0,get:function(){return a.JSBT}})},7972:function(e,t,r){var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.JSBT=void 0;const n=r(6842),a=r(7538),d=r(5223),i=r(4650),s=r(507),y=o(r(2043));class c{static setClassFactories(e){this._classFactories=e}static encode(e){const t=(0,s.createEncodeOptions)();return t.refs={enabled:!0},(0,i.encode)(e,t)}static decode(e){const t=new y.default(e);t.completeStream();const r=(0,d.createDecodeOptions)();return r.objects.factories=this._classFactories,r.context.readBytes=t.getReadBytes(),(0,n.decode)(null,t,r)}static async decodeStream(e){const t=(0,d.createDecodeOptions)();return t.objects.factories=this._classFactories,t.context.readBytes=e.getReadBytes(),(0,a.decodeStream)(null,e,t)}}t.JSBT=c,c._classFactories={}},8489:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.decodeObjectStream=void 0;const o=r(6268),n=r(6156),a=r(7538);t.decodeObjectStream=async(e,t,r,d={})=>{if((240&e)!==n.ETypeByteCode.Object)throw new Error(`Provaded incorrect type ${e} for decoding object`);const i=7&e;if(0===i)return d;const s=(0,o.bytesToInteger)(await t.readStreamBytes(i)),y=Boolean(8&e),c=y?await(0,a.decodeStream)(null,t,r):null,p=d;for(let e=0;e<s;e+=1){const e=await(0,a.decodeStream)(null,t,r),o=await(0,a.decodeStream)(null,t,r);p[e]=o}if(y){const e=r.objects.classInstanceConstructorNameKey;if(null!==e){const t=r.objects.factories[c];t?Object.setPrototypeOf(p,t.prototype):Object.defineProperty(p,e,{value:c,configurable:!0,enumerable:!1,writable:!1})}}return p}},8494:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.decodeConstant=t.constantMap=void 0;const o=r(4556),n=r(6156);t.constantMap=new Map([[o.EConstantByteCode.FALSE,!1],[o.EConstantByteCode.TRUE,!0],[o.EConstantByteCode.Null,null],[o.EConstantByteCode.Undefined,void 0],[o.EConstantByteCode.NaN,NaN],[o.EConstantByteCode.Pos_Infinity,1/0],[o.EConstantByteCode.Neg_Infinity,-1/0],[o.EConstantByteCode.Empty_Value,""]]),t.decodeConstant=(e,r)=>{if((240&e)!==n.ETypeByteCode.Constant)throw new Error(`Provaded incorrect type ${e} for decoding contant`);if(!t.constantMap.has(e))throw new Error("Not supported contsant for decoding");return t.constantMap.get(e)}},8745:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getFilledItemsCount=void 0,t.getFilledItemsCount=e=>{let t=0;return(e instanceof ArrayBuffer?new Uint8Array(e):e).forEach(e=>{0!==e&&(t+=1)}),t}},8782:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.toChar=void 0,t.toChar=(...e)=>String.fromCharCode(...e)},9159:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.decodeTypedArrayStream=void 0;const o=r(6268),n=r(6156),a=r(5409),d=r(598),i=r(9330),s=r(3815);t.decodeTypedArrayStream=async(e,t,r)=>{if((240&e)!==n.ETypeByteCode.Typed_Array)throw new Error(`Provaded incorrect type ${e} for decoding typed array`);const y=await t.readStreamByte(),c=64&y,p=7&y,l=(56&y)>>>3,f=s.typedArrayConstructorByType[e],u=new f(0),B=(0,d.getBytesPerElement)(u),g=c?(0,o.bytesToInteger)(await t.readStreamBytes(l)):(0,o.bytesToInteger)(await t.readStreamBytes(p)),h=c?(0,o.bytesToInteger)(await t.readStreamBytes(p)):g,b=s.dataViewGetter[e];if(c){const r=new f(Math.round(g/B));for(let e=0;e<h;e+=1){const e=await(0,i.decodeIntegerStream)(await t.readStreamByte(),t),o=await t.readStreamBytes(B),n=new DataView(o.buffer);r[e]=n[b](0,!0)}return e===a.ETypedArrayByteCode.ArrayBuffer?r.buffer:r}{const r=new f(g),o=new DataView((await t.readStreamBytes(B*g)).buffer);for(let e=0;e<g;e+=1)r[e]=o[b](e*B,!0);return e===a.ETypedArrayByteCode.ArrayBuffer?r.buffer:r}}},9231:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.isObject=void 0,t.isObject=e=>"object"==typeof e&&e&&!Array.isArray(e)&&"Object"===e?.constructor?.name},9278:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.decodeDateStream=void 0;const o=r(6268),n=r(6156);t.decodeDateStream=async(e,t)=>{if((240&e)!==n.ETypeByteCode.Date)throw new Error(`Provaded incorrect type ${e} for decoding Date`);const r=7&e,a=Boolean(8&e);if(0===r)return new Date(0);const d=await t.readStreamBytes(r),i=(0,o.bytesToInteger)(d);return new Date(a?-i:i)}},9330:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.decodeIntegerStream=void 0;const o=r(6268),n=r(6156);t.decodeIntegerStream=async(e,t)=>{if((240&e)!==n.ETypeByteCode.Integer)throw new Error(`Provaded incorrect type ${e} for decoding integer`);const r=7&e,a=Boolean(8&e);if(0===r)return a?-0:0;const d=await t.readStreamBytes(r),i=(0,o.bytesToInteger)(d);return a?-i:i}},9670:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.integerToBytes=void 0,t.integerToBytes=(e,t=0,r=!1)=>{if(e<0)throw new Error("integerToBytes does not support negative integers");const o=[];let n=Math.abs(e);for(let e=1;t?e<=t:n;e+=1){const e=n%256;o.push(e),n-=e,n=Math.floor(n/256)}return r?o.reverse():o}}},t={},r=function r(o){var n=t[o];if(void 0!==n)return n.exports;var a=t[o]={exports:{}};return e[o].call(a.exports,a,a.exports,r),a.exports}(7729);module.exports=r})();